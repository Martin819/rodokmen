var cytoscape;(function(window){"use strict";var $$=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};$$.init=function(options){if(options===undefined){options={}}if($$.is.plainObject(options)){return new $$.Core(options)}else if($$.is.string(options)){return $$.extension.apply($$.extension,arguments)}};$$.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}if(typeof define!=="undefined"){define("cytoscape",function(){return cytoscape})}if(window){window.cytoscape=cytoscape}})(typeof window==="undefined"?null:window);(function($$,window){"use strict";$$.is={string:function(obj){return obj!=null&&typeof obj==typeof""},fn:function(obj){return obj!=null&&typeof obj===typeof function(){}},array:function(obj){return obj!=null&&obj instanceof Array},plainObject:function(obj){return obj!=null&&typeof obj===typeof{}&&!$$.is.array(obj)&&obj.constructor===Object},number:function(obj){return obj!=null&&typeof obj===typeof 1&&!isNaN(obj)},integer:function(obj){return $$.is.number(obj)&&Math.floor(obj)===obj},color:function(obj){return obj!=null&&typeof obj===typeof""&&$.Color(obj).toString()!==""},bool:function(obj){return obj!=null&&typeof obj===typeof true},elementOrCollection:function(obj){return $$.is.element(obj)||$$.is.collection(obj)},element:function(obj){return obj instanceof $$.Element&&obj._private.single},collection:function(obj){return obj instanceof $$.Collection&&!obj._private.single},core:function(obj){return obj instanceof $$.Core},style:function(obj){return obj instanceof $$.Style},stylesheet:function(obj){return obj instanceof $$.Stylesheet},event:function(obj){return obj instanceof $$.Event},emptyString:function(obj){if(!obj){return true}else if($$.is.string(obj)){if(obj===""||obj.match(/^\s+$/)){return true}}return false},nonemptyString:function(obj){if(obj&&$$.is.string(obj)&&obj!==""&&!obj.match(/^\s+$/)){return true}return false},domElement:function(obj){if(typeof HTMLElement==="undefined"){return false}else{return obj instanceof HTMLElement}},touch:function(){return window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}}})(cytoscape,typeof window==="undefined"?null:window);(function($$){"use strict";$$.util={extend:function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!$$.is.fn(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&($$.is.plainObject(copy)||(copyIsArray=$$.is.array(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&$$.is.array(src)?src:[]}else{clone=src&&$$.is.plainObject(src)?src:{}}target[name]=$$.util.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target},throttle:function(func,wait,options){var leading=true,trailing=true;if(options===false){leading=false}else if($$.is.plainObject(options)){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}options=options||{};options.leading=leading;options.maxWait=wait;options.trailing=trailing;return $$.util.debounce(func,wait,options)},now:function(){return+new Date},debounce:function(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(!$$.is.fn(func)){return}wait=Math.max(0,wait)||0;if(options===true){var leading=true;trailing=false}else if($$.is.plainObject(options)){leading=options.leading;maxWait="maxWait"in options&&(Math.max(wait,options.maxWait)||0);trailing="trailing"in options?options.trailing:trailing}var delayed=function(){var remaining=wait-($$.util.now()-stamp);if(remaining<=0){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=$$.util.now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}};var maxDelayed=function(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=$$.util.now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}};return function(){args=arguments;stamp=$$.util.now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}},error:function(msg){if(console){if(console.error){console.error(msg)}else if(console.log){console.log(msg)}else{throw msg}}else{throw msg}},clone:function(obj){var target={};for(var i in obj){if(obj.hasOwnProperty(i)){target[i]=obj[i]}}return target},copy:function(obj){if(obj==null){return obj}if($$.is.array(obj)){return obj.slice()}else if($$.is.plainObject(obj)){return $$.util.clone(obj)}else{return obj}},mapEmpty:function(map){var empty=true;if(map!=null){for(var i in map){empty=false;break}}return empty},pushMap:function(options){var array=$$.util.getMap(options);if(array==null){$$.util.setMap($.extend({},options,{value:[options.value]}))}else{array.push(options.value)}},setMap:function(options){var obj=options.map;var key;var keys=options.keys;var l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if($$.is.plainObject(key)){$$.util.error("Tried to set map with object key")}if(i<keys.length-1){if(obj[key]==null){obj[key]={}}obj=obj[key]}else{obj[key]=options.value}}},getMap:function(options){var obj=options.map;var keys=options.keys;var l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if($$.is.plainObject(key)){$$.util.error("Tried to get map with object key")}obj=obj[key];if(obj==null){return obj}}return obj},deleteMap:function(options){var obj=options.map;var keys=options.keys;var l=keys.length;var keepChildren=options.keepChildren;for(var i=0;i<l;i++){var key=keys[i];if($$.is.plainObject(key)){$$.util.error("Tried to delete map with object key")}var lastKey=i===options.keys.length-1;if(lastKey){if(keepChildren){for(var child in obj){if(!keepChildren[child]){delete obj[child]}}}else{delete obj[key]}}else{obj=obj[key]}}},capitalize:function(str){if($$.is.emptyString(str)){return str}return str.charAt(0).toUpperCase()+str.substring(1)},camel2dash:function(str){var ret=[];for(var i=0;i<str.length;i++){var ch=str[i];var chLowerCase=ch.toLowerCase();var isUpperCase=ch!==chLowerCase;if(isUpperCase){ret.push("-");ret.push(chLowerCase)}else{ret.push(ch)}}var noUpperCases=ret.length===str.length;if(noUpperCases){return str}return ret.join("")},dash2camel:function(str){var ret=[];var nextIsUpper=false;for(var i=0;i<str.length;i++){var ch=str[i];var isDash=ch==="-";if(isDash){nextIsUpper=true}else{if(nextIsUpper){ret.push(ch.toUpperCase())}else{ret.push(ch)}nextIsUpper=false}}return ret.join("")},trim:function(str){var first,last;for(first=0;first<str.length&&str[first]===" ";first++){}for(last=str.length-1;last>first&&str[last]===" ";last--){}return str.substring(first,last+1)},hex2tuple:function(hex){if(!(hex.length===4||hex.length===7)||hex[0]!=="#"){return}var shortHex=hex.length===4;var r,g,b;var base=16;if(shortHex){r=parseInt(hex[1]+hex[1],base);g=parseInt(hex[2]+hex[2],base);b=parseInt(hex[3]+hex[3],base)}else{r=parseInt(hex[1]+hex[2],base);g=parseInt(hex[3]+hex[4],base);b=parseInt(hex[5]+hex[6],base)}return[r,g,b]},hsl2tuple:function(hsl){var ret;var number=$$.util.regex.number;var h,s,l,a,r,g,b;function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}var m=new RegExp("^"+$$.util.regex.hsla+"$").exec(hsl);if(m){h=parseInt(m[1]);if(h<0){h=(360- -1*h%360)%360}else if(h>360){h=h%360}h/=360;s=parseFloat(m[2]);if(s<0||s>100){return}s=s/100;l=parseFloat(m[3]);if(l<0||l>100){return}l=l/100;a=m[4];if(a!==undefined){a=parseFloat(a);if(a<0||a>1){return}}if(s===0){r=g=b=Math.round(l*255)}else{var q=l<.5?l*(1+s):l+s-l*s;var p=2*l-q;r=Math.round(255*hue2rgb(p,q,h+1/3));g=Math.round(255*hue2rgb(p,q,h));b=Math.round(255*hue2rgb(p,q,h-1/3))}ret=[r,g,b,a]}return ret},rgb2tuple:function(rgb){var ret;var number=$$.util.regex.number;var m=new RegExp("^"+$$.util.regex.rgba+"$").exec(rgb);if(m){ret=[];var isPct=[];for(var i=1;i<=3;i++){var channel=m[i];if(channel[channel.length-1]==="%"){isPct[i]=true}channel=parseFloat(channel);if(isPct[i]){channel=channel/100*255}if(channel<0||channel>255){return}ret.push(Math.floor(channel))}var atLeastOneIsPct=isPct[1]||isPct[2]||isPct[3];var allArePct=isPct[1]&&isPct[2]&&isPct[3];if(atLeastOneIsPct&&!allArePct){return}var alpha=m[4];if(alpha!==undefined){alpha=parseFloat(alpha);if(alpha<0||alpha>1){return}ret.push(alpha)}}return ret},colorname2tuple:function(color){return $$.util.colors[color.toLowerCase()]},color2tuple:function(color){return $$.util.colorname2tuple(color)||$$.util.hex2tuple(color)||$$.util.rgb2tuple(color)||$$.util.hsl2tuple(color)},tuple2hex:function(tuple){var r=tuple[0];var g=tuple[1];var b=tuple[2];function ch2hex(ch){var hex=ch.toString(16);if(hex.length===1){hex="0"+hex}return hex}return"#"+ch2hex(r)+ch2hex(g)+ch2hex(b)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};$$.util.regex={};$$.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)";$$.util.regex.rgba="rgb[a]?\\(("+$$.util.regex.number+"[%]?)\\s*,\\s*("+$$.util.regex.number+"[%]?)\\s*,\\s*("+$$.util.regex.number+"[%]?)(?:\\s*,\\s*("+$$.util.regex.number+"))?\\)";$$.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+$$.util.regex.number+"[%]?)\\s*,\\s*(?:"+$$.util.regex.number+"[%]?)\\s*,\\s*(?:"+$$.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+$$.util.regex.number+"))?\\)";$$.util.regex.hsla="hsl[a]?\\(("+$$.util.regex.number+")\\s*,\\s*("+$$.util.regex.number+"[%])\\s*,\\s*("+$$.util.regex.number+"[%])(?:\\s*,\\s*("+$$.util.regex.number+"))?\\)";$$.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+$$.util.regex.number+")\\s*,\\s*(?:"+$$.util.regex.number+"[%])\\s*,\\s*(?:"+$$.util.regex.number+"[%])(?:\\s*,\\s*(?:"+$$.util.regex.number+"))?\\)";$$.util.regex.hex3="\\#[0-9a-fA-F]{3}";$$.util.regex.hex6="\\#[0-9a-fA-F]{6}";var requestAnimationFrame=typeof window==="undefined"?function(fn){fn&&fn()}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;$$.util.requestAnimationFrame=function(fn){requestAnimationFrame(fn)}})(cytoscape);(function($$){"use strict";$$.math={};$$.math.signum=function(x){if(x>0){return 1}else if(x<0){return-1}else{return 0}};$$.math.distance=function(p1,p2){var dx=p2.x-p1.x;var dy=p2.y-p1.y;return Math.sqrt(dx*dx+dy*dy)};$$.math.qbezierAt=function(p0,p1,p2,t){return(1-t)*(1-t)*p0+2*(1-t)*t*p1+t*t*p2};$$.math.qbezierPtAt=function(p0,p1,p2,t){return{x:$$.math.qbezierAt(p0.x,p1.x,p2.x,t),y:$$.math.qbezierAt(p0.y,p1.y,p2.y,t)}};$$.math.roundRectangleIntersectLine=function(x,y,nodeX,nodeY,width,height,padding){var cornerRadius=this.getRoundRectangleRadius(width,height);var halfWidth=width/2;var halfHeight=height/2;var straightLineIntersections;{var topStartX=nodeX-halfWidth+cornerRadius-padding;var topStartY=nodeY-halfHeight-padding;var topEndX=nodeX+halfWidth-cornerRadius+padding;var topEndY=topStartY;straightLineIntersections=this.finiteLinesIntersect(x,y,nodeX,nodeY,topStartX,topStartY,topEndX,topEndY,false);if(straightLineIntersections.length>0){return straightLineIntersections}}{var rightStartX=nodeX+halfWidth+padding;var rightStartY=nodeY-halfHeight+cornerRadius-padding;var rightEndX=rightStartX;var rightEndY=nodeY+halfHeight-cornerRadius+padding;straightLineIntersections=this.finiteLinesIntersect(x,y,nodeX,nodeY,rightStartX,rightStartY,rightEndX,rightEndY,false);if(straightLineIntersections.length>0){return straightLineIntersections}}{var bottomStartX=nodeX-halfWidth+cornerRadius-padding;var bottomStartY=nodeY+halfHeight+padding;var bottomEndX=nodeX+halfWidth-cornerRadius+padding;var bottomEndY=bottomStartY;straightLineIntersections=this.finiteLinesIntersect(x,y,nodeX,nodeY,bottomStartX,bottomStartY,bottomEndX,bottomEndY,false);if(straightLineIntersections.length>0){return straightLineIntersections}}{var leftStartX=nodeX-halfWidth-padding;var leftStartY=nodeY-halfHeight+cornerRadius-padding;var leftEndX=leftStartX;var leftEndY=nodeY+halfHeight-cornerRadius+padding;straightLineIntersections=this.finiteLinesIntersect(x,y,nodeX,nodeY,leftStartX,leftStartY,leftEndX,leftEndY,false);if(straightLineIntersections.length>0){return straightLineIntersections}}var arcIntersections;{var topLeftCenterX=nodeX-halfWidth+cornerRadius;var topLeftCenterY=nodeY-halfHeight+cornerRadius;arcIntersections=this.intersectLineCircle(x,y,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding);if(arcIntersections.length>0&&arcIntersections[0]<=topLeftCenterX&&arcIntersections[1]<=topLeftCenterY){return[arcIntersections[0],arcIntersections[1]]}}{var topRightCenterX=nodeX+halfWidth-cornerRadius;var topRightCenterY=nodeY-halfHeight+cornerRadius;arcIntersections=this.intersectLineCircle(x,y,nodeX,nodeY,topRightCenterX,topRightCenterY,cornerRadius+padding);if(arcIntersections.length>0&&arcIntersections[0]>=topRightCenterX&&arcIntersections[1]<=topRightCenterY){return[arcIntersections[0],arcIntersections[1]]}}{var bottomRightCenterX=nodeX+halfWidth-cornerRadius;var bottomRightCenterY=nodeY+halfHeight-cornerRadius;arcIntersections=this.intersectLineCircle(x,y,nodeX,nodeY,bottomRightCenterX,bottomRightCenterY,cornerRadius+padding);if(arcIntersections.length>0&&arcIntersections[0]>=bottomRightCenterX&&arcIntersections[1]>=bottomRightCenterY){return[arcIntersections[0],arcIntersections[1]]}}{var bottomLeftCenterX=nodeX-halfWidth+cornerRadius;var bottomLeftCenterY=nodeY+halfHeight-cornerRadius;arcIntersections=this.intersectLineCircle(x,y,nodeX,nodeY,bottomLeftCenterX,bottomLeftCenterY,cornerRadius+padding);if(arcIntersections.length>0&&arcIntersections[0]<=bottomLeftCenterX&&arcIntersections[1]>=bottomLeftCenterY){return[arcIntersections[0],arcIntersections[1]]}}return[]};$$.math.roundRectangleIntersectBox=function(boxX1,boxY1,boxX2,boxY2,width,height,centerX,centerY,padding){var cornerRadius=this.getRoundRectangleRadius(width,height);var hBoxTopLeftX=centerX-width/2-padding;var hBoxTopLeftY=centerY-height/2+cornerRadius-padding;var hBoxBottomRightX=centerX+width/2+padding;var hBoxBottomRightY=centerY+height/2-cornerRadius+padding;var vBoxTopLeftX=centerX-width/2+cornerRadius-padding;var vBoxTopLeftY=centerY-height/2-padding;var vBoxBottomRightX=centerX+width/2-cornerRadius+padding;var vBoxBottomRightY=centerY+height/2+padding;var boxMinX=Math.min(boxX1,boxX2);var boxMaxX=Math.max(boxX1,boxX2);var boxMinY=Math.min(boxY1,boxY2);var boxMaxY=Math.max(boxY1,boxY2);if(boxMaxX<hBoxTopLeftX){return false}else if(boxMinX>hBoxBottomRightX){return false}if(boxMaxY<vBoxTopLeftY){return false}else if(boxMinY>vBoxBottomRightY){return false}if(hBoxTopLeftX>=boxMinX&&hBoxTopLeftX<=boxMaxX&&hBoxTopLeftY>=boxMinY&&hBoxTopLeftY<=boxMaxY){return true}if(hBoxBottomRightX>=boxMinX&&hBoxBottomRightX<=boxMaxX&&hBoxTopLeftY>=boxMinY&&hBoxTopLeftY<=boxMaxY){return true}if(hBoxBottomRightX>=boxMinX&&hBoxBottomRightX<=boxMaxX&&hBoxBottomRightY>=boxMinY&&hBoxBottomRightY<=boxMaxY){return true}if(hBoxTopLeftX>=boxMinX&&hBoxTopLeftX<=boxMaxX&&hBoxBottomRightY>=boxMinY&&hBoxBottomRightY<=boxMaxY){return true}if(boxMinX>=hBoxTopLeftX&&boxMinX<=hBoxBottomRightX&&boxMinY>=hBoxTopLeftY&&boxMinY<=hBoxBottomRightY){return true}if(boxMaxX>=hBoxTopLeftX&&boxMaxX<=hBoxBottomRightX&&boxMinY>=hBoxTopLeftY&&boxMinY<=hBoxBottomRightY){return true}if(boxMaxX>=hBoxTopLeftX&&boxMaxX<=hBoxBottomRightX&&boxMaxY>=hBoxTopLeftY&&boxMaxY<=hBoxBottomRightY){return true}if(boxMinX>=hBoxTopLeftX&&boxMinX<=hBoxBottomRightX&&boxMaxY>=hBoxTopLeftY&&boxMaxY<=hBoxBottomRightY){return true}if(vBoxTopLeftX>=boxMinX&&vBoxTopLeftX<=boxMaxX&&vBoxTopLeftY>=boxMinY&&vBoxTopLeftY<=boxMaxY){return true}if(vBoxBottomRightX>=boxMinX&&vBoxBottomRightX<=boxMaxX&&vBoxTopLeftY>=boxMinY&&vBoxTopLeftY<=boxMaxY){return true}if(vBoxBottomRightX>=boxMinX&&vBoxBottomRightX<=boxMaxX&&vBoxBottomRightY>=boxMinY&&vBoxBottomRightY<=boxMaxY){return true}if(vBoxTopLeftX>=boxMinX&&vBoxTopLeftX<=boxMaxX&&vBoxBottomRightY>=boxMinY&&vBoxBottomRightY<=boxMaxY){return true}if(boxMinX>=vBoxTopLeftX&&boxMinX<=vBoxBottomRightX&&boxMinY>=vBoxTopLeftY&&boxMinY<=vBoxBottomRightY){return true}if(boxMaxX>=vBoxTopLeftX&&boxMaxX<=vBoxBottomRightX&&boxMinY>=vBoxTopLeftY&&boxMinY<=vBoxBottomRightY){return true}if(boxMaxX>=vBoxTopLeftX&&boxMaxX<=vBoxBottomRightX&&boxMaxY>=vBoxTopLeftY&&boxMaxY<=vBoxBottomRightY){return true}if(boxMinX>=vBoxTopLeftX&&boxMinX<=vBoxBottomRightX&&boxMaxY>=vBoxTopLeftY&&boxMaxY<=vBoxBottomRightY){return true}if(this.boxIntersectEllipse(boxMinX,boxMinY,boxMaxX,boxMaxY,padding,cornerRadius*2,cornerRadius*2,vBoxTopLeftX+padding,hBoxTopLeftY+padding)){return true}if(this.boxIntersectEllipse(boxMinX,boxMinY,boxMaxX,boxMaxY,padding,cornerRadius*2,cornerRadius*2,vBoxBottomRightX-padding,hBoxTopLeftY+padding)){return true}if(this.boxIntersectEllipse(boxMinX,boxMinY,boxMaxX,boxMaxY,padding,cornerRadius*2,cornerRadius*2,vBoxBottomRightX-padding,hBoxBottomRightY-padding)){return true}if(this.boxIntersectEllipse(boxMinX,boxMinY,boxMaxX,boxMaxY,padding,cornerRadius*2,cornerRadius*2,vBoxTopLeftX+padding,hBoxBottomRightY-padding)){return true}return false};$$.math.checkInBoundingCircle=function(x,y,farthestPointSqDistance,padding,width,height,centerX,centerY){x=(x-centerX)/(width+padding);y=(y-centerY)/(height+padding);return x*x+y*y<=farthestPointSqDistance};$$.math.checkInBoundingBox=function(x,y,points,padding,width,height,centerX,centerY){var minX=points[0],minY=points[1];var maxX=points[0],maxY=points[1];for(var i=1;i<points.length/2;i++){if(points[i*2]<minX){minX=points[i*2]}else if(points[i*2]>maxX){maxX=points[i*2]}if(points[i*2+1]<minY){minY=points[i*2+1]}else if(points[i*2+1]>maxY){maxY=points[i*2+1]}}x-=centerX;y-=centerY;x/=width;y/=height;if(x<minX){return false}else if(x>maxX){return false}if(y<minY){return false}else if(y>maxY){return false}return true};$$.math.boxInBezierVicinity=function(x1box,y1box,x2box,y2box,x1,y1,x2,y2,x3,y3,tolerance){var midX=.25*x1+.5*x2+.25*x3;var midY=.25*y1+.5*y2+.25*y3;var boxMinX=Math.min(x1box,x2box)-tolerance;var boxMinY=Math.min(y1box,y2box)-tolerance;var boxMaxX=Math.max(x1box,x2box)+tolerance;var boxMaxY=Math.max(y1box,y2box)+tolerance;if(x1>=boxMinX&&x1<=boxMaxX&&y1>=boxMinY&&y1<=boxMaxY){return 1}else if(x3>=boxMinX&&x3<=boxMaxX&&y3>=boxMinY&&y3<=boxMaxY){return 1}else if(midX>=boxMinX&&midX<=boxMaxX&&midY>=boxMinY&&midY<=boxMaxY){return 1}else if(x2>=boxMinX&&x2<=boxMaxX&&y2>=boxMinY&&y2<=boxMaxY){return 1}var curveMinX=Math.min(x1,midX,x3);var curveMinY=Math.min(y1,midY,y3);var curveMaxX=Math.max(x1,midX,x3);var curveMaxY=Math.max(y1,midY,y3);if(curveMinX>boxMaxX||curveMaxX<boxMinX||curveMinY>boxMaxY||curveMaxY<boxMinY){return 0}return 1};$$.math.checkBezierInBox=function(x1box,y1box,x2box,y2box,x1,y1,x2,y2,x3,y3,tolerance){function sampleInBox(t){var x=$$.math.qbezierAt(x1,x2,x3,t);var y=$$.math.qbezierAt(y1,y2,y3,t);return x1box<=x&&x<=x2box&&y1box<=y&&y<=y2box}for(var t=0;t<=1;t+=.25){if(!sampleInBox(t)){return false}}return true};$$.math.checkStraightEdgeInBox=function(x1box,y1box,x2box,y2box,x1,y1,x2,y2,tolerance){return x1box<=x1&&x1<=x2box&&x1box<=x2&&x2<=x2box&&y1box<=y1&&y1<=y2box&&y1box<=y2&&y2<=y2box};$$.math.checkStraightEdgeCrossesBox=function(x1box,y1box,x2box,y2box,x1,y1,x2,y2,tolerance){var boxMinX=Math.min(x1box,x2box)-tolerance;var boxMinY=Math.min(y1box,y2box)-tolerance;var boxMaxX=Math.max(x1box,x2box)+tolerance;var boxMaxY=Math.max(y1box,y2box)+tolerance;var aX=x2-x1;var bX=x1;var yValue;var aY=y2-y1;var bY=y1;var xValue;if(Math.abs(aX)<1e-4){return x1>=boxMinX&&x1<=boxMaxX&&Math.min(y1,y2)<=boxMinY&&Math.max(y1,y2)>=boxMaxY}var tLeft=(boxMinX-bX)/aX;if(tLeft>0&&tLeft<=1){yValue=aY*tLeft+bY;if(yValue>=boxMinY&&yValue<=boxMaxY){return true}}var tRight=(boxMaxX-bX)/aX;if(tRight>0&&tRight<=1){yValue=aY*tRight+bY;if(yValue>=boxMinY&&yValue<=boxMaxY){return true}}var tTop=(boxMinY-bY)/aY;if(tTop>0&&tTop<=1){xValue=aX*tTop+bX;if(xValue>=boxMinX&&xValue<=boxMaxX){return true}}var tBottom=(boxMaxY-bY)/aY;if(tBottom>0&&tBottom<=1){xValue=aX*tBottom+bX;if(xValue>=boxMinX&&xValue<=boxMaxX){return true}}return false};$$.math.checkBezierCrossesBox=function(x1box,y1box,x2box,y2box,x1,y1,x2,y2,x3,y3,tolerance){var boxMinX=Math.min(x1box,x2box)-tolerance;var boxMinY=Math.min(y1box,y2box)-tolerance;var boxMaxX=Math.max(x1box,x2box)+tolerance;var boxMaxY=Math.max(y1box,y2box)+tolerance;if(x1>=boxMinX&&x1<=boxMaxX&&y1>=boxMinY&&y1<=boxMaxY){return true}else if(x3>=boxMinX&&x3<=boxMaxX&&y3>=boxMinY&&y3<=boxMaxY){return true}var aX=x1-2*x2+x3;var bX=-2*x1+2*x2;var cX=x1;var xIntervals=[];if(Math.abs(aX)<1e-4){var leftParam=(boxMinX-x1)/bX;var rightParam=(boxMaxX-x1)/bX;xIntervals.push(leftParam,rightParam)}else{var discriminantX1=bX*bX-4*aX*(cX-boxMinX);var tX1,tX2;if(discriminantX1>0){var sqrt=Math.sqrt(discriminantX1);tX1=(-bX+sqrt)/(2*aX);tX2=(-bX-sqrt)/(2*aX);xIntervals.push(tX1,tX2)}var discriminantX2=bX*bX-4*aX*(cX-boxMaxX);var tX3,tX4;if(discriminantX2>0){var sqrt=Math.sqrt(discriminantX2);tX3=(-bX+sqrt)/(2*aX);tX4=(-bX-sqrt)/(2*aX);xIntervals.push(tX3,tX4)}}xIntervals.sort(function(a,b){return a-b});var aY=y1-2*y2+y3;var bY=-2*y1+2*y2;var cY=y1;var yIntervals=[];if(Math.abs(aY)<1e-4){var topParam=(boxMinY-y1)/bY;var bottomParam=(boxMaxY-y1)/bY;yIntervals.push(topParam,bottomParam)}else{var discriminantY1=bY*bY-4*aY*(cY-boxMinY);var tY1,tY2;if(discriminantY1>0){var sqrt=Math.sqrt(discriminantY1);tY1=(-bY+sqrt)/(2*aY);tY2=(-bY-sqrt)/(2*aY);yIntervals.push(tY1,tY2)}var discriminantY2=bY*bY-4*aY*(cY-boxMaxY);var tY3,tY4;if(discriminantY2>0){var sqrt=Math.sqrt(discriminantY2);tY3=(-bY+sqrt)/(2*aY);tY4=(-bY-sqrt)/(2*aY);yIntervals.push(tY3,tY4)}}yIntervals.sort(function(a,b){return a-b});for(var index=0;index<xIntervals.length;index+=2){for(var yIndex=1;yIndex<yIntervals.length;yIndex+=2){if(xIntervals[index]<yIntervals[yIndex]&&yIntervals[yIndex]>=0&&xIntervals[index]<=1&&xIntervals[index+1]>yIntervals[yIndex-1]&&yIntervals[yIndex-1]<=1&&xIntervals[index+1]>=0){return true}}}return false};$$.math.inLineVicinity=function(x,y,lx1,ly1,lx2,ly2,tolerance){var t=tolerance;var x1=Math.min(lx1,lx2);var x2=Math.max(lx1,lx2);var y1=Math.min(ly1,ly2);var y2=Math.max(ly1,ly2);return x1-t<=x&&x<=x2+t&&y1-t<=y&&y<=y2+t};$$.math.inBezierVicinity=function(x,y,x1,y1,x2,y2,x3,y3,toleranceSquared){var bb={x1:Math.min(x1,x3,x2),x2:Math.max(x1,x3,x2),y1:Math.min(y1,y3,y2),y2:Math.max(y1,y3,y2)};if(x<bb.x1||x>bb.x2||y<bb.y1||y>bb.y2){return false}else{return true}var middlePointX=.25*x1+.5*x2+.25*x3;var middlePointY=.25*y1+.5*y2+.25*y3;var bb={x1:Math.min(x1,x3,middlePointX),x2:Math.max(x1,x3,middlePointX),y1:Math.min(y1,y3,middlePointY),y2:Math.max(y1,y3,middlePointY)};if(x<bb.x1||x>bb.x2||y<bb.y1||y>bb.y2){return false}else{return true}var displacementX,displacementY,offsetX,offsetY;var dotProduct,dotSquared,hypSquared;var outside=function(x,y,startX,startY,endX,endY,toleranceSquared,counterClockwise){dotProduct=(endY-startY)*(x-startX)+(startX-endX)*(y-startY);dotSquared=dotProduct*dotProduct;sideSquared=(endY-startY)*(endY-startY)+(startX-endX)*(startX-endX);if(counterClockwise){if(dotProduct>0){return false}}else{if(dotProduct<0){return false}}return dotSquared/sideSquared>toleranceSquared};var testPointX=(middlePointX+x2)/2;var testPointY=(middlePointY+y2)/2;var counterClockwise=true;if(outside(testPointX,testPointY,x1,y1,x2,y2,0,counterClockwise)){counterClockwise=!counterClockwise}return!outside(x,y,x1,y1,x2,y2,toleranceSquared,counterClockwise)&&!outside(x,y,x2,y2,x3,y3,toleranceSquared,counterClockwise)&&!outside(x,y,x3,y3,x1,y1,toleranceSquared,counterClockwise)};$$.math.solveCubic=function(a,b,c,d,result){b/=a;c/=a;d/=a;var discriminant,q,r,dum1,s,t,term1,r13;q=(3*c-b*b)/9;r=-(27*d)+b*(9*c-2*b*b);r/=54;discriminant=q*q*q+r*r;result[1]=0;term1=b/3;if(discriminant>0){s=r+Math.sqrt(discriminant);s=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3);t=r-Math.sqrt(discriminant);t=t<0?-Math.pow(-t,1/3):Math.pow(t,1/3);result[0]=-term1+s+t;term1+=(s+t)/2;result[4]=result[2]=-term1;term1=Math.sqrt(3)*(-t+s)/2;result[3]=term1;result[5]=-term1;return}result[5]=result[3]=0;if(discriminant==0){r13=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);result[0]=-term1+2*r13;result[4]=result[2]=-(r13+term1);return}q=-q;dum1=q*q*q;dum1=Math.acos(r/Math.sqrt(dum1));r13=2*Math.sqrt(q);result[0]=-term1+r13*Math.cos(dum1/3);result[2]=-term1+r13*Math.cos((dum1+2*Math.PI)/3);result[4]=-term1+r13*Math.cos((dum1+4*Math.PI)/3);return};$$.math.sqDistanceToQuadraticBezier=function(x,y,x1,y1,x2,y2,x3,y3){var a=1*x1*x1-4*x1*x2+2*x1*x3+4*x2*x2-4*x2*x3+x3*x3+y1*y1-4*y1*y2+2*y1*y3+4*y2*y2-4*y2*y3+y3*y3;var b=1*9*x1*x2-3*x1*x1-3*x1*x3-6*x2*x2+3*x2*x3+9*y1*y2-3*y1*y1-3*y1*y3-6*y2*y2+3*y2*y3;var c=1*3*x1*x1-6*x1*x2+x1*x3-x1*x+2*x2*x2+2*x2*x-x3*x+3*y1*y1-6*y1*y2+y1*y3-y1*y+2*y2*y2+2*y2*y-y3*y;var d=1*x1*x2-x1*x1+x1*x-x2*x+y1*y2-y1*y1+y1*y-y2*y;var roots=[];this.solveCubic(a,b,c,d,roots);var zeroThreshold=1e-7;var params=[];for(var index=0;index<6;index+=2){if(Math.abs(roots[index+1])<zeroThreshold&&roots[index]>=0&&roots[index]<=1){params.push(roots[index])}}params.push(1);params.push(0);var minDistanceSquared=-1;var closestParam;var curX,curY,distSquared;for(var i=0;i<params.length;i++){curX=Math.pow(1-params[i],2)*x1+2*(1-params[i])*params[i]*x2+params[i]*params[i]*x3;curY=Math.pow(1-params[i],2)*y1+2*(1-params[i])*params[i]*y2+params[i]*params[i]*y3;distSquared=Math.pow(curX-x,2)+Math.pow(curY-y,2);if(minDistanceSquared>=0){if(distSquared<minDistanceSquared){minDistanceSquared=distSquared;closestParam=params[i]}}else{minDistanceSquared=distSquared;closestParam=params[i]}}return minDistanceSquared};$$.math.sqDistanceToFiniteLine=function(x,y,x1,y1,x2,y2){var offset=[x-x1,y-y1];var line=[x2-x1,y2-y1];var lineSq=line[0]*line[0]+line[1]*line[1];var hypSq=offset[0]*offset[0]+offset[1]*offset[1];var dotProduct=offset[0]*line[0]+offset[1]*line[1];var adjSq=dotProduct*dotProduct/lineSq;if(dotProduct<0){return hypSq}if(adjSq>lineSq){return(x-x2)*(x-x2)+(y-y2)*(y-y2)}return hypSq-adjSq};$$.math.pointInsidePolygon=function(x,y,basePoints,centerX,centerY,width,height,direction,padding){var transformedPoints=new Array(basePoints.length);var angle=Math.asin(direction[1]/Math.sqrt(direction[0]*direction[0]+direction[1]*direction[1]));if(direction[0]<0){angle=angle+Math.PI/2}else{angle=-angle-Math.PI/2}var cos=Math.cos(-angle);var sin=Math.sin(-angle);for(var i=0;i<transformedPoints.length/2;i++){transformedPoints[i*2]=width/2*(basePoints[i*2]*cos-basePoints[i*2+1]*sin);transformedPoints[i*2+1]=height/2*(basePoints[i*2+1]*cos+basePoints[i*2]*sin);transformedPoints[i*2]+=centerX;transformedPoints[i*2+1]+=centerY}var points;if(padding>0){var expandedLineSet=this.expandPolygon(transformedPoints,-padding);points=this.joinLines(expandedLineSet)}else{points=transformedPoints}var x1,y1,x2,y2;var y3;var up=0;var down=0;for(var i=0;i<points.length/2;i++){x1=points[i*2];y1=points[i*2+1];if(i+1<points.length/2){x2=points[(i+1)*2];y2=points[(i+1)*2+1]}else{x2=points[(i+1-points.length/2)*2];y2=points[(i+1-points.length/2)*2+1]}if(x1==x&&x2==x){}else if(x1>=x&&x>=x2||x1<=x&&x<=x2){y3=(x-x1)/(x2-x1)*(y2-y1)+y1;if(y3>y){up++}if(y3<y){down++}}else{continue}}if(up%2==0){return false}else{return true}};$$.math.joinLines=function(lineSet){var vertices=new Array(lineSet.length/2);var currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY;var nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY;for(var i=0;i<lineSet.length/4;i++){currentLineStartX=lineSet[i*4];currentLineStartY=lineSet[i*4+1];currentLineEndX=lineSet[i*4+2];currentLineEndY=lineSet[i*4+3];if(i<lineSet.length/4-1){nextLineStartX=lineSet[(i+1)*4];nextLineStartY=lineSet[(i+1)*4+1];nextLineEndX=lineSet[(i+1)*4+2];nextLineEndY=lineSet[(i+1)*4+3]}else{nextLineStartX=lineSet[0];
nextLineStartY=lineSet[1];nextLineEndX=lineSet[2];nextLineEndY=lineSet[3]}var intersection=this.finiteLinesIntersect(currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,true);vertices[i*2]=intersection[0];vertices[i*2+1]=intersection[1]}return vertices};$$.math.expandPolygon=function(points,pad){var expandedLineSet=new Array(points.length*2);var currentPointX,currentPointY,nextPointX,nextPointY;for(var i=0;i<points.length/2;i++){currentPointX=points[i*2];currentPointY=points[i*2+1];if(i<points.length/2-1){nextPointX=points[(i+1)*2];nextPointY=points[(i+1)*2+1]}else{nextPointX=points[0];nextPointY=points[1]}var offsetX=nextPointY-currentPointY;var offsetY=-(nextPointX-currentPointX);var offsetLength=Math.sqrt(offsetX*offsetX+offsetY*offsetY);var normalizedOffsetX=offsetX/offsetLength;var normalizedOffsetY=offsetY/offsetLength;expandedLineSet[i*4]=currentPointX+normalizedOffsetX*pad;expandedLineSet[i*4+1]=currentPointY+normalizedOffsetY*pad;expandedLineSet[i*4+2]=nextPointX+normalizedOffsetX*pad;expandedLineSet[i*4+3]=nextPointY+normalizedOffsetY*pad}return expandedLineSet};$$.math.intersectLineEllipse=function(x,y,centerX,centerY,ellipseWradius,ellipseHradius){var dispX=centerX-x;var dispY=centerY-y;dispX/=ellipseWradius;dispY/=ellipseHradius;var len=Math.sqrt(dispX*dispX+dispY*dispY);var newLength=len-1;if(newLength<0){return[]}var lenProportion=newLength/len;return[(centerX-x)*lenProportion+x,(centerY-y)*lenProportion+y]};$$.math.dotProduct=function(vec1,vec2){if(vec1.length!=2||vec2.length!=2){throw"dot product: arguments are not vectors"}return vec1[0]*vec2[0]+vec1[1]*vec2[1]};$$.math.intersectLineCircle=function(x1,y1,x2,y2,centerX,centerY,radius){var d=[x2-x1,y2-y1];var s=[x1,y1];var c=[centerX,centerY];var f=[x1-centerX,y1-centerY];var a=d[0]*d[0]+d[1]*d[1];var b=2*(f[0]*d[0]+f[1]*d[1]);var c=f[0]*f[0]+f[1]*f[1]-radius*radius;var discriminant=b*b-4*a*c;if(discriminant<0){return[]}var t1=(-b+Math.sqrt(discriminant))/(2*a);var t2=(-b-Math.sqrt(discriminant))/(2*a);var tMin=Math.min(t1,t2);var tMax=Math.max(t1,t2);var inRangeParams=[];if(tMin>=0&&tMin<=1){inRangeParams.push(tMin)}if(tMax>=0&&tMax<=1){inRangeParams.push(tMax)}if(inRangeParams.length==0){return[]}var nearIntersectionX=inRangeParams[0]*d[0]+x1;var nearIntersectionY=inRangeParams[0]*d[1]+y1;if(inRangeParams.length>1){if(inRangeParams[0]==inRangeParams[1]){return[nearIntersectionX,nearIntersectionY]}else{var farIntersectionX=inRangeParams[1]*d[0]+x1;var farIntersectionY=inRangeParams[1]*d[1]+y1;return[nearIntersectionX,nearIntersectionY,farIntersectionX,farIntersectionY]}}else{return[nearIntersectionX,nearIntersectionY]}};$$.math.findCircleNearPoint=function(centerX,centerY,radius,farX,farY){var displacementX=farX-centerX;var displacementY=farY-centerY;var distance=Math.sqrt(displacementX*displacementX+displacementY*displacementY);var unitDisplacementX=displacementX/distance;var unitDisplacementY=displacementY/distance;return[centerX+unitDisplacementX*radius,centerY+unitDisplacementY*radius]};$$.math.findMaxSqDistanceToOrigin=function(points){var maxSqDistance=1e-6;var sqDistance;for(var i=0;i<points.length/2;i++){sqDistance=points[i*2]*points[i*2]+points[i*2+1]*points[i*2+1];if(sqDistance>maxSqDistance){maxSqDistance=sqDistance}}return maxSqDistance};$$.math.finiteLinesIntersect=function(x1,y1,x2,y2,x3,y3,x4,y4,infiniteLines){var ua_t=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3);var ub_t=(x2-x1)*(y1-y3)-(y2-y1)*(x1-x3);var u_b=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);if(u_b!=0){var ua=ua_t/u_b;var ub=ub_t/u_b;if(0<=ua&&ua<=1&&0<=ub&&ub<=1){return[x1+ua*(x2-x1),y1+ua*(y2-y1)]}else{if(!infiniteLines){return[]}else{return[x1+ua*(x2-x1),y1+ua*(y2-y1)]}}}else{if(ua_t==0||ub_t==0){if([x1,x2,x4].sort()[1]==x4){return[x4,y4]}if([x1,x2,x3].sort()[1]==x3){return[x3,y3]}if([x3,x4,x2].sort()[1]==x2){return[x2,y2]}return[]}else{return[]}}};$$.math.boxIntersectEllipse=function(x1,y1,x2,y2,padding,width,height,centerX,centerY){if(x2<x1){var oldX1=x1;x1=x2;x2=oldX1}if(y2<y1){var oldY1=y1;y1=y2;y2=oldY1}var west=[centerX-width/2-padding,centerY];var east=[centerX+width/2+padding,centerY];var north=[centerX,centerY-height/2-padding];var south=[centerX,centerY+height/2+padding];if(x2<west[0]){return false}if(x1>east[0]){return false}if(y1>south[1]){return false}if(y2<north[1]){return false}if(x1<=east[0]&&east[0]<=x2&&y1<=east[1]&&east[1]<=y2){return true}if(x1<=west[0]&&west[0]<=x2&&y1<=west[1]&&west[1]<=y2){return true}if(x1<=north[0]&&north[0]<=x2&&y1<=north[1]&&north[1]<=y2){return true}if(x1<=south[0]&&south[0]<=x2&&y1<=south[1]&&south[1]<=y2){return true}x1=(x1-centerX)/(width/2+padding);x2=(x2-centerX)/(width/2+padding);y1=(y1-centerY)/(height/2+padding);y2=(y2-centerY)/(height/2+padding);if(x1*x1+y1*y1<=1){return true}if(x2*x2+y1*y1<=1){return true}if(x2*x2+y2*y2<=1){return true}if(x1*x1+y2*y2<=1){return true}return false};$$.math.boxIntersectPolygon=function(x1,y1,x2,y2,basePoints,width,height,centerX,centerY,direction,padding){if(x2<x1){var oldX1=x1;x1=x2;x2=oldX1}if(y2<y1){var oldY1=y1;y1=y2;y2=oldY1}var transformedPoints=new Array(basePoints.length);var angle=Math.asin(direction[1]/Math.sqrt(direction[0]*direction[0]+direction[1]*direction[1]));if(direction[0]<0){angle=angle+Math.PI/2}else{angle=-angle-Math.PI/2}var cos=Math.cos(-angle);var sin=Math.sin(-angle);for(var i=0;i<transformedPoints.length/2;i++){transformedPoints[i*2]=width/2*(basePoints[i*2]*cos-basePoints[i*2+1]*sin);transformedPoints[i*2+1]=height/2*(basePoints[i*2+1]*cos+basePoints[i*2]*sin);transformedPoints[i*2]+=centerX;transformedPoints[i*2+1]+=centerY}var minTransformedX=transformedPoints[0];var maxTransformedX=transformedPoints[0];var minTransformedY=transformedPoints[1];var maxTransformedY=transformedPoints[1];for(var i=1;i<transformedPoints.length/2;i++){if(transformedPoints[i*2]>maxTransformedX){maxTransformedX=transformedPoints[i*2]}if(transformedPoints[i*2]<minTransformedX){minTransformedX=transformedPoints[i*2]}if(transformedPoints[i*2+1]>maxTransformedY){maxTransformedY=transformedPoints[i*2+1]}if(transformedPoints[i*2+1]<minTransformedY){minTransformedY=transformedPoints[i*2+1]}}if(x2<minTransformedX-padding){return false}if(x1>maxTransformedX+padding){return false}if(y2<minTransformedY-padding){return false}if(y1>maxTransformedY+padding){return false}var points;if(padding>0){var expandedLineSet=$$.math.expandPolygon(transformedPoints,-padding);points=$$.math.joinLines(expandedLineSet)}else{points=transformedPoints}for(var i=0;i<transformedPoints.length/2;i++){if(x1<=transformedPoints[i*2]&&transformedPoints[i*2]<=x2){if(y1<=transformedPoints[i*2+1]&&transformedPoints[i*2+1]<=y2){return true}}}for(var i=0;i<points.length/2;i++){var currentX=points[i*2];var currentY=points[i*2+1];var nextX;var nextY;if(i<points.length/2-1){nextX=points[(i+1)*2];nextY=points[(i+1)*2+1]}else{nextX=points[0];nextY=points[1]}if($$.math.finiteLinesIntersect(currentX,currentY,nextX,nextY,x1,y1,x2,y1,false).length>0){return true}if($$.math.finiteLinesIntersect(currentX,currentY,nextX,nextY,x1,y2,x2,y2,false).length>0){return true}if($$.math.finiteLinesIntersect(currentX,currentY,nextX,nextY,x1,y1,x1,y2,false).length>0){return true}if($$.math.finiteLinesIntersect(currentX,currentY,nextX,nextY,x2,y1,x2,y2,false).length>0){return true}}return false};$$.math.polygonIntersectLine=function(x,y,basePoints,centerX,centerY,width,height,padding){var intersections=[];var intersection;var transformedPoints=new Array(basePoints.length);for(var i=0;i<transformedPoints.length/2;i++){transformedPoints[i*2]=basePoints[i*2]*width+centerX;transformedPoints[i*2+1]=basePoints[i*2+1]*height+centerY}var points;if(padding>0){var expandedLineSet=$$.math.expandPolygon(transformedPoints,-padding);points=$$.math.joinLines(expandedLineSet)}else{points=transformedPoints}var currentX,currentY,nextX,nextY;for(var i=0;i<points.length/2;i++){currentX=points[i*2];currentY=points[i*2+1];if(i<points.length/2-1){nextX=points[(i+1)*2];nextY=points[(i+1)*2+1]}else{nextX=points[0];nextY=points[1]}intersection=this.finiteLinesIntersect(x,y,centerX,centerY,currentX,currentY,nextX,nextY);if(intersection.length!=0){intersections.push(intersection[0],intersection[1])}}return intersections};$$.math.shortenIntersection=function(intersection,offset,amount){var disp=[intersection[0]-offset[0],intersection[1]-offset[1]];var length=Math.sqrt(disp[0]*disp[0]+disp[1]*disp[1]);var lenRatio=(length-amount)/length;if(lenRatio<0){lenRatio=1e-5}return[offset[0]+lenRatio*disp[0],offset[1]+lenRatio*disp[1]]};$$.math.generateUnitNgonPointsFitToSquare=function(sides,rotationRadians){var points=$$.math.generateUnitNgonPoints(sides,rotationRadians);points=$$.math.fitPolygonToSquare(points);return points};$$.math.fitPolygonToSquare=function(points){var x,y;var sides=points.length/2;var minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity;for(var i=0;i<sides;i++){x=points[2*i];y=points[2*i+1];minX=Math.min(minX,x);maxX=Math.max(maxX,x);minY=Math.min(minY,y);maxY=Math.max(maxY,y)}var sx=2/(maxX-minX);var sy=2/(maxY-minY);for(var i=0;i<sides;i++){x=points[2*i]=points[2*i]*sx;y=points[2*i+1]=points[2*i+1]*sy;minX=Math.min(minX,x);maxX=Math.max(maxX,x);minY=Math.min(minY,y);maxY=Math.max(maxY,y)}if(minY<-1){for(var i=0;i<sides;i++){y=points[2*i+1]=points[2*i+1]+(-1-minY)}}return points};$$.math.generateUnitNgonPoints=function(sides,rotationRadians){var increment=1/sides*2*Math.PI;var startAngle=sides%2==0?Math.PI/2+increment/2:Math.PI/2;startAngle+=rotationRadians;var points=new Array(sides*2);var currentAngle,x,y;for(var i=0;i<sides;i++){currentAngle=i*increment+startAngle;x=points[2*i]=Math.cos(currentAngle);y=points[2*i+1]=Math.sin(-currentAngle)}return points};$$.math.getRoundRectangleRadius=function(width,height){return Math.min(width/4,height/4,8)}})(cytoscape);(function($$){"use strict";$$.instances=[];$$.instanceCounter=0;$$.lastInstanceTime;$$.registerInstance=function(instance,domElement){var cy;if($$.is.core(instance)){cy=instance}else if($$.is.domElement(instance)){domElement=instance}var oldReg=$$.getRegistrationForInstance(instance,domElement);if(oldReg){if(!oldReg.cy){oldReg.cy=instance;oldReg.domElement=domElement}else{$$.util.error("Tried to register on a pre-existing registration")}return oldReg}else{var time=+new Date;var suffix;if(!$$.lastInstanceTime||$$.lastInstanceTime===time){$$.instanceCounter=0}else{++$$.instanceCounter}$$.lastInstanceTime=time;suffix=$$.instanceCounter;var id="cy-"+time+"-"+suffix;var registration={id:id,cy:cy,domElement:domElement,readies:[]};$$.instances.push(registration);$$.instances[id]=registration;return registration}};$$.removeRegistrationForInstance=function(instance,domElement){var cy;if($$.is.core(instance)){cy=instance}else if($$.is.domElement(instance)){domElement=instance}if($$.is.core(cy)){var id=cy._private.instanceId;delete $$.instances[id];$$.instances.splice(id,1)}else if($$.is.domElement(domElement)){for(var i=0;i<$$.instances.length;i++){var reg=$$.instances[i];if(reg.domElement===domElement){delete $$.instances[reg.id];$$.instances.splice(i,1);i--}}}};$$.getRegistrationForInstance=function(instance,domElement){var cy;if($$.is.core(instance)){if(instance.registered()){cy=instance}}else if($$.is.domElement(instance)){domElement=instance}if($$.is.core(cy)){var id=cy._private.instanceId;return $$.instances[id]}else if($$.is.domElement(domElement)){for(var i=$$.instances.length-1;i>=0;i--){var reg=$$.instances[i];if(reg.domElement===domElement){return reg}}}}})(cytoscape);(function($$){"use strict";var extensions={};$$.extensions=extensions;var modules={};$$.modules=modules;function setExtension(type,name,registrant){var impl={};impl[name]=registrant;switch(type){case"core":case"collection":$$.fn[type](impl)}return $$.util.setMap({map:extensions,keys:[type,name],value:registrant})}function getExtension(type,name){return $$.util.getMap({map:extensions,keys:[type,name]})}function setModule(type,name,moduleType,moduleName,registrant){return $$.util.setMap({map:modules,keys:[type,name,moduleType,moduleName],value:registrant})}function getModule(type,name,moduleType,moduleName){return $$.util.getMap({map:modules,keys:[type,name,moduleType,moduleName]})}$$.extension=function(){if(arguments.length==2){return getExtension.apply(this,arguments)}else if(arguments.length==3){return setExtension.apply(this,arguments)}else if(arguments.length==4){return getModule.apply(this,arguments)}else if(arguments.length==5){return setModule.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}})(cytoscape);(function($,$$){"use strict";if(!$){return}$.fn.cytoscape=function(opts){var $this=$(this);if(opts==="get"){var reg=$$.getRegistrationForInstance($this[0]);return reg.cy}else if($$.is.fn(opts)){var ready=opts;var domEle=$this[0];var reg=$$.getRegistrationForInstance(domEle);if(!reg){reg=$$.registerInstance(domEle)}if(reg&&reg.cy&&reg.cy.ready()){reg.cy.trigger("ready",[],ready)}else{reg.readies.push(ready)}}else if($$.is.plainObject(opts)){return $this.each(function(){var options=$.extend({},opts,{container:$(this)[0]});cytoscape(options)})}else{var domEle=$this[0];var rets=[];var args=[];for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}$this.each(function(){var reg=$$.getRegistrationForInstance(domEle);var cy=reg.cy;var fnName=opts;if(cy&&$$.is.fn(cy[fnName])){var ret=cy[fnName].apply(cy,args);rets.push(ret)}});if(rets.length===1){rets=rets[0]}else if(rets.length==0){rets=$(this)}return rets}};$.cytoscape=cytoscape;if($.fn.cy==null&&$.cy==null){$.fn.cy=$.fn.cytoscape;$.cy=$.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function($$){"use strict";$$.Event=function(src,props){if(!(this instanceof $$.Event)){return new $$.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse}else{this.type=src}if(props){$$.util.extend(this,props)}this.timeStamp=src&&src.timeStamp||+new Date};function returnFalse(){return false}function returnTrue(){return true}$$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse}})(cytoscape);(function($$){"use strict";$$.define={data:function(params){var defaults={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false,onSet:function(self){},canSet:function(self){return true}};params=$$.util.extend({},defaults,params);return function dataImpl(name,value){var p=params;var self=this;var selfIsArrayLike=self.length!==undefined;var all=selfIsArrayLike?self:[self];var single=selfIsArrayLike?self[0]:self;if($$.is.string(name)){if(p.allowGetting&&value===undefined){var ret;if(single){ret=single._private[p.field][name]}return ret}else if(p.allowSetting&&value!==undefined){var valid=!p.immutableKeys[name];if(valid){for(var i=0,l=all.length;i<l;i++){if(p.canSet(all[i])){all[i]._private[p.field][name]=value}}if(p.updateMappers){self.updateMappers()}p.onSet(self);if(p.settingTriggersEvent){self[p.triggerFnName](p.settingEvent)}}}}else if(p.allowSetting&&$$.is.plainObject(name)){var obj=name;var k,v;for(k in obj){v=obj[k];var valid=!p.immutableKeys[k];if(valid){for(var i=0,l=all.length;i<l;i++){if(p.canSet(all[i])){all[i]._private[p.field][k]=v}}}}if(p.updateMappers){self.updateMappers()}p.onSet(self);if(p.settingTriggersEvent){self[p.triggerFnName](p.settingEvent)}}else if(p.allowBinding&&$$.is.fn(name)){var fn=name;self.bind(p.bindingEvent,fn)}else if(p.allowGetting&&name===undefined){var ret;if(single){ret=single._private[p.field]}return ret}return self}},batchData:function(params){var defaults={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};var p=params=$$.util.extend({},defaults,params);return function batchDataImpl(map){var self=this;var selfIsArrayLike=self.length!==undefined;var eles=selfIsArrayLike?self:self._private.elements;if(eles.length===0){return self}var cy=selfIsArrayLike?eles[0]._private.cy:self;for(var i=0;i<eles.length;i++){var ele=eles[i];var id=ele._private.data.id;var mapData=map[id];if(mapData!==undefined&&mapData!==null){var obj=mapData;var k,v;for(k in obj){v=obj[k];var valid=!p.immutableKeys[k];if(valid){ele._private[p.field][k]=v}}}}var coln=new $$.Collection(cy,eles);if(p.updateMappers){coln.updateMappers()}coln[p.triggerFnName](p.event);return self}},removeData:function(params){var defaults={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};params=$$.util.extend({},defaults,params);return function removeDataImpl(names){var p=params;var self=this;var selfIsArrayLike=self.length!==undefined;var all=selfIsArrayLike?self:[self];var single=selfIsArrayLike?self[0]:self;if($$.is.string(names)){var keys=names.split(/\s+/);var l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if($$.is.emptyString(key)){continue}var valid=!p.immutableKeys[key];if(valid){for(var i_a=0,l_a=all.length;i_a<l_a;i_a++){delete all[i_a]._private[p.field][key]}}}if(p.triggerEvent){self[p.triggerFnName](p.event)}}else if(names===undefined){for(var i_a=0,l_a=all.length;i_a<l_a;i_a++){var _privateFields=all[i_a]._private[p.field];for(var key in _privateFields){var validKeyToDelete=!p.immutableKeys[key];if(validKeyToDelete){delete _privateFields[key]}}}if(p.triggerEvent){self[p.triggerFnName](p.event)}}return self}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return false}},on:function(params){var defaults={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};params=$$.util.extend({},defaults,params);return function onImpl(events,selector,data,callback){var self=this;var selfIsArrayLike=self.length!==undefined;var all=selfIsArrayLike?self:[self];var single=selfIsArrayLike?self[0]:self;var eventsIsString=$$.is.string(events);var p=params;if($$.is.plainObject(selector)){callback=data;data=selector;selector=undefined}else if($$.is.fn(selector)||selector===false){callback=selector;data=undefined;selector=undefined}if($$.is.fn(data)||data===false){callback=data;data=undefined}if(!($$.is.fn(callback)||callback===false)&&eventsIsString){return self}if(eventsIsString){var map={};map[events]=callback;events=map}for(var evts in events){callback=events[evts];if(callback===false){callback=$$.define.event.falseCallback}if(!$$.is.fn(callback)){continue}evts=evts.split(/\s+/);for(var i=0;i<evts.length;i++){var evt=evts[i];if($$.is.emptyString(evt)){continue}var match=evt.match($$.define.event.regex);if(match){var type=match[1];var namespace=match[2]?match[2]:undefined;var listener={callback:callback,data:data,delegated:selector?true:false,selector:selector,selObj:new $$.Selector(selector),type:type,namespace:namespace,unbindSelfOnTrigger:p.unbindSelfOnTrigger,unbindAllBindersOnTrigger:p.unbindAllBindersOnTrigger,binders:all};for(var j=0;j<all.length;j++){all[j]._private.listeners.push(listener)}}}}return self}},off:function offImpl(params){var defaults={};params=$$.util.extend({},defaults,params);return function(events,selector,callback){var self=this;var selfIsArrayLike=self.length!==undefined;var all=selfIsArrayLike?self:[self];var single=selfIsArrayLike?self[0]:self;var eventsIsString=$$.is.string(events);var p=params;if(arguments.length===0){for(var i=0;i<all.length;i++){all[i]._private.listeners=[]}return self}if($$.is.fn(selector)||selector===false){callback=selector;selector=undefined}if(eventsIsString){var map={};map[events]=callback;events=map}for(var evts in events){callback=events[evts];if(callback===false){callback=$$.define.event.falseCallback}evts=evts.split(/\s+/);for(var h=0;h<evts.length;h++){var evt=evts[h];if($$.is.emptyString(evt)){continue}var match=evt.match($$.define.event.optionalTypeRegex);if(match){var type=match[1]?match[1]:undefined;var namespace=match[2]?match[2]:undefined;for(var i=0;i<all.length;i++){var listeners=all[i]._private.listeners;for(var j=0;j<listeners.length;j++){var listener=listeners[j];var nsMatches=!namespace||namespace===listener.namespace;var typeMatches=!type||listener.type===type;var cbMatches=!callback||callback===listener.callback;var listenerMatches=nsMatches&&typeMatches&&cbMatches;if(listenerMatches){listeners.splice(j,1);j--}}}}}}return self}},trigger:function(params){var defaults={};params=$$.util.extend({},defaults,params);return function triggerImpl(events,extraParams,fnToTrigger){var self=this;var selfIsArrayLike=self.length!==undefined;var all=selfIsArrayLike?self:[self];var single=selfIsArrayLike?self[0]:self;var eventsIsString=$$.is.string(events);var eventsIsObject=$$.is.plainObject(events);var eventsIsEvent=$$.is.event(events);var p=params;var cy=this._private.cy||this;if(eventsIsString){var evts=events.split(/\s+/);events=[];for(var i=0;i<evts.length;i++){var evt=evts[i];if($$.is.emptyString(evt)){continue}var match=evt.match($$.define.event.regex);var type=match[1];var namespace=match[2]?match[2]:undefined;events.push({type:type,namespace:namespace})}}else if(eventsIsObject){var eventArgObj=events;events=[eventArgObj]}if(extraParams){if(!$$.is.array(extraParams)){extraParams=[extraParams]}}else{extraParams=[]}for(var i=0;i<events.length;i++){var evtObj=events[i];for(var j=0;j<all.length;j++){var triggerer=all[j];var listeners=triggerer._private.listeners;var triggererIsElement=$$.is.element(triggerer);var bubbleUp=triggererIsElement;var evt;if(eventsIsEvent){evt=evtObj;evt.cyTarget=evt.cyTarget||triggerer;evt.cy=evt.cy||cy;evt.namespace=evt.namespace||evtObj.namespace}else{evt=new $$.Event(evtObj,{cyTarget:triggerer,cy:cy,namespace:evtObj.namespace})}if(evt.cyPosition){var pos=evt.cyPosition;var zoom=cy.zoom();var pan=cy.pan();evt.cyRenderedPosition={x:pos.x*zoom+pan.x,y:pos.y*zoom+pan.y}}if(fnToTrigger){listeners=[{namespace:evt.namespace,type:evt.type,callback:fnToTrigger}]}for(var k=0;k<listeners.length;k++){var lis=listeners[k];var nsMatches=!lis.namespace||lis.namespace===evt.namespace;var typeMatches=lis.type===evt.type;var targetMatches=lis.delegated?triggerer!==evt.cyTarget&&$$.is.element(evt.cyTarget)&&lis.selObj.filter(evt.cyTarget).length>0:true;var listenerMatches=nsMatches&&typeMatches&&targetMatches;if(listenerMatches){var args=[evt];args=args.concat(extraParams);if(lis.data){evt.data=lis.data}else{evt.data=undefined}if(lis.unbindSelfOnTrigger||lis.unbindAllBindersOnTrigger){listeners.splice(k,1);k--}if(lis.unbindAllBindersOnTrigger){var binders=lis.binders;for(var l=0;l<binders.length;l++){var binder=binders[l];if(!binder||binder===triggerer){continue}var binderListeners=binder._private.listeners;for(var m=0;m<binderListeners.length;m++){var binderListener=binderListeners[m];if(binderListener===lis){binderListeners.splice(m,1);m--}}}}var context=lis.delegated?evt.cyTarget:triggerer;var ret=lis.callback.apply(context,args);if(ret===false||evt.isPropagationStopped()){bubbleUp=false;if(ret===false){evt.stopPropagation();evt.preventDefault()}}}}if(bubbleUp){var parent=triggerer.parent();var hasParent=parent.length!==0;if(hasParent){parent=parent[0];parent.trigger(evt)}else{cy.trigger(evt)}}}}return self}}}})(cytoscape);(function($$){"use strict";$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true};if(!selector||$$.is.string(selector)&&selector.match(/^\s*$/)){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);self[0]=newQuery();self[0].collection=collection;self.length=1}else if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else if($$.is.string(selector)){var currentSubject=null;var newQuery=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",variable:'(?:[\\w-]|(?:\\\\"+ metaChar +"))+',comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"'+"|"+"'(?:\\\\'|[^'])+'",number:$$.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};tokens.value=tokens.string+"|"+tokens.number;tokens.className=tokens.variable;tokens.id=tokens.variable;var cleanMetaChars=function(str){return str.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(match,$1,offset,original){return $1})};var ops=tokens.comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];tokens.comparatorOp+="|@"+op}var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+tokens.id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+tokens.className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{query:true,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})}},dataCompare:{query:true,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(variable,comparatorOp,value){var valueIsString=new RegExp("^"+tokens.string+"$").exec(value)!=null;if(valueIsString){value=value.substring(1,value.length-1)}else{value=parseFloat(value)}this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{query:true,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:parseFloat(number)})}},nextQuery:{separator:true,regex:tokens.separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:tokens.child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:tokens.descendant,populate:function(){var descendantQuery=newQuery();descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:tokens.subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `"+selector+"`");return false}currentSubject=this;this.subject=this}}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;var consumeExpr=function(expectation){var expr;var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match,name:name}};var consumeWhitespace=function(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}};self[0]=newQuery();consumeWhitespace();for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `"+selector+"`is invalid");return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;parent.child=child;query=parent}else if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$$.util.error("When adjusting references for the selector `"+query+"`, neither parent nor ancestor was found");break}}self[j]=query.subject}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$$.util.error("Group `"+self[j].group+"` conflicts with implicit group `"+onlyThisGroup+"` in selector `"+selector+"`");return}self[j].group=onlyThisGroup}}}else{$$.util.error("A selector must be created from a string; found "+selector);return}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};$$.selfn.filter=function(collection){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":transparent":allColonSelectorsMatch=element.transparent();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":loop":allColonSelectorsMatch=element.isEdge()&&element.data("source")===element.data("target");break;case":simple":allColonSelectorsMatch=element.isEdge()&&element.data("source")!==element.data("target");break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();
break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);break}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return false;var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&id==actualId;if(!allIdsMatch)break}if(!allIdsMatch)return false;var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch)break}if(!allClassesMatch)return false;var operandsMatch=function(params){var allDataMatches=true;for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldVal=params.fieldValue(field);var fieldStr=!$$.is.string(fieldVal)&&!$$.is.number(fieldVal)?"":""+fieldVal;var valStr=""+value;var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(caseInsensitive){value=valStr.toLowerCase();fieldVal=fieldStr.toLowerCase()}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;case"=":matches=fieldVal===value;break;case"!=":matches=fieldVal!==value;break;case">":matches=fieldVal>value;break;case">=":matches=fieldVal>=value;break;case"<":matches=fieldVal<value;break;case"<=":matches=fieldVal<=value;break;default:matches=false;break}}else if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)}if(!matches){allDataMatches=false;break}}return allDataMatches};var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}var confirmRelations=function(query,elements){if(query!=null){var matches=false;elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}};if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";var clean=function(obj){if($$.is.string(obj)){return obj}return""};var queryToString=function(query){var str="";var group=clean(query.group);str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];if(data.value){str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}else{str+="["+clean(data.operator)+data.field+"]"}}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="[["+meta.field+clean(meta.operator)+clean(meta.value)+"]]"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str};for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function($$){"use strict";$$.Style=function(cy){if(!(this instanceof $$.Style)){return new $$.Style(cy)}if(!$$.is.core(cy)){$$.util.error("A style must have a core reference");return}this._private={cy:cy,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};$$.style=$$.Style;$$.styfn=$$.Style.prototype;$$.fn.style=function(fnMap,options){for(var fnName in fnMap){var fn=fnMap[fnName];$$.Style.prototype=fn}};(function(){var number=$$.util.regex.number;var rgba=$$.util.regex.rgbaNoBackRefs;var hsla=$$.util.regex.hslaNoBackRefs;var hex3=$$.util.regex.hex3;var hex6=$$.util.regex.hex6;var data=function(prefix){return"^"+prefix+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"};var mapData=function(prefix){return"^"+prefix+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+number+")\\s*\\,\\s*("+number+")\\s*,\\s*("+number+"|\\w+|"+rgba+"|"+hsla+"|"+hex3+"|"+hex6+")\\s*\\,\\s*("+number+"|\\w+|"+rgba+"|"+hsla+"|"+hex3+"|"+hex6+")\\)$"};$$.style.types={time:{number:true,min:0,units:"s"},percent:{number:true,min:0,max:100,units:"%"},zeroOneNumber:{number:true,min:0,max:1,unitless:true},nOneOneNumber:{number:true,min:-1,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},bgPos:{number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:data("data")},layoutData:{mapping:true,regex:data("layoutData")},mapData:{mapping:true,regex:mapData("mapData")},mapLayoutData:{mapping:true,regex:mapData("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:true}};var t=$$.style.types;$$.style.properties=[{name:"text-valign",type:t.valign},{name:"text-halign",type:t.halign},{name:"color",type:t.color},{name:"content",type:t.text},{name:"text-outline-color",type:t.color},{name:"text-outline-width",type:t.size},{name:"text-outline-opacity",type:t.zeroOneNumber},{name:"text-opacity",type:t.zeroOneNumber},{name:"text-decoration",type:t.textDecoration},{name:"text-transform",type:t.textTransform},{name:"font-family",type:t.fontFamily},{name:"font-style",type:t.fontStyle},{name:"font-variant",type:t.fontVariant},{name:"font-weight",type:t.fontWeight},{name:"font-size",type:t.size},{name:"min-zoomed-font-size",type:t.size},{name:"display",type:t.display},{name:"visibility",type:t.visibility},{name:"opacity",type:t.zeroOneNumber},{name:"z-index",type:t.nonNegativeInt},{name:"overlay-padding",type:t.size},{name:"overlay-color",type:t.color},{name:"overlay-opacity",type:t.zeroOneNumber},{name:"transition-property",type:t.propList},{name:"transition-duration",type:t.time},{name:"transition-delay",type:t.time},{name:"background-blacken",type:t.nOneOneNumber},{name:"background-color",type:t.color},{name:"background-opacity",type:t.zeroOneNumber},{name:"background-image",type:t.url},{name:"background-position-x",type:t.bgPos},{name:"background-position-y",type:t.bgPos},{name:"background-repeat",type:t.bgRepeat},{name:"background-fit",type:t.bgFit},{name:"background-clip",type:t.bgClip},{name:"pie-size",type:t.bgSize},{name:"pie-1-background-color",type:t.color},{name:"pie-2-background-color",type:t.color},{name:"pie-3-background-color",type:t.color},{name:"pie-4-background-color",type:t.color},{name:"pie-5-background-color",type:t.color},{name:"pie-6-background-color",type:t.color},{name:"pie-7-background-color",type:t.color},{name:"pie-8-background-color",type:t.color},{name:"pie-9-background-color",type:t.color},{name:"pie-10-background-color",type:t.color},{name:"pie-11-background-color",type:t.color},{name:"pie-12-background-color",type:t.color},{name:"pie-13-background-color",type:t.color},{name:"pie-14-background-color",type:t.color},{name:"pie-15-background-color",type:t.color},{name:"pie-16-background-color",type:t.color},{name:"pie-1-background-size",type:t.percent},{name:"pie-2-background-size",type:t.percent},{name:"pie-3-background-size",type:t.percent},{name:"pie-4-background-size",type:t.percent},{name:"pie-5-background-size",type:t.percent},{name:"pie-6-background-size",type:t.percent},{name:"pie-7-background-size",type:t.percent},{name:"pie-8-background-size",type:t.percent},{name:"pie-9-background-size",type:t.percent},{name:"pie-10-background-size",type:t.percent},{name:"pie-11-background-size",type:t.percent},{name:"pie-12-background-size",type:t.percent},{name:"pie-13-background-size",type:t.percent},{name:"pie-14-background-size",type:t.percent},{name:"pie-15-background-size",type:t.percent},{name:"pie-16-background-size",type:t.percent},{name:"border-color",type:t.color},{name:"border-opacity",type:t.zeroOneNumber},{name:"border-width",type:t.size},{name:"border-style",type:t.lineStyle},{name:"height",type:t.size},{name:"width",type:t.size},{name:"padding-left",type:t.size},{name:"padding-right",type:t.size},{name:"padding-top",type:t.size},{name:"padding-bottom",type:t.size},{name:"shape",type:t.nodeShape},{name:"source-arrow-shape",type:t.arrowShape},{name:"target-arrow-shape",type:t.arrowShape},{name:"source-arrow-color",type:t.color},{name:"target-arrow-color",type:t.color},{name:"source-arrow-fill",type:t.arrowFill},{name:"target-arrow-fill",type:t.arrowFill},{name:"line-style",type:t.lineStyle},{name:"line-color",type:t.color},{name:"control-point-step-size",type:t.size},{name:"control-point-distance",type:t.size},{name:"control-point-weight",type:t.zeroOneNumber},{name:"curve-style",type:t.curveStyle},{name:"selection-box-color",type:t.color},{name:"selection-box-opacity",type:t.zeroOneNumber},{name:"selection-box-border-color",type:t.color},{name:"selection-box-border-width",type:t.size},{name:"panning-cursor",type:t.cursor},{name:"active-bg-color",type:t.color},{name:"active-bg-opacity",type:t.zeroOneNumber},{name:"active-bg-size",type:t.size},{name:"outside-texture-bg-color",type:t.color},{name:"outside-texture-bg-opacity",type:t.zeroOneNumber}];var props=$$.style.properties;for(var i=0;i<props.length;i++){var prop=props[i];props[prop.name]=prop}$$.style.pieBackgroundN=16})();$$.styfn.addDefaultStylesheet=function(){var fontFamily="Helvetica"||this.containerPropertyAsString("font-family")||"sans-serif";var fontStyle="normal"||this.containerPropertyAsString("font-style")||"normal";var fontVariant="normal"||this.containerPropertyAsString("font-variant")||"normal";var fontWeight="normal"||this.containerPropertyAsString("font-weight")||"normal";var color="#000"||this.containerPropertyAsString("color")||"#000";var textTransform="none"||this.containerPropertyAsString("text-transform")||"none";var textDecoration="none"||this.containerPropertyAsString("text-decoration")||"none";var fontSize=16||this.containerPropertyAsString("font-size")||16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:color,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":textTransform,"font-family":fontFamily,"font-style":fontStyle,"font-variant":fontVariant,"font-weight":fontWeight,"font-size":fontSize,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","pie-size":"100%","pie-1-background-color":"black","pie-1-background-size":"0%","pie-2-background-color":"black","pie-2-background-size":"0%","pie-3-background-color":"black","pie-3-background-size":"0%","pie-4-background-color":"black","pie-4-background-size":"0%","pie-5-background-color":"black","pie-5-background-size":"0%","pie-6-background-color":"black","pie-6-background-size":"0%","pie-7-background-color":"black","pie-7-background-size":"0%","pie-8-background-color":"black","pie-8-background-size":"0%","pie-9-background-color":"black","pie-9-background-size":"0%","pie-10-background-color":"black","pie-10-background-size":"0%","pie-11-background-color":"black","pie-11-background-size":"0%","pie-12-background-color":"black","pie-12-background-size":"0%","pie-13-background-color":"black","pie-13-background-size":"0%","pie-14-background-color":"black","pie-14-background-size":"0%","pie-15-background-color":"black","pie-15-background-size":"0%","pie-16-background-color":"black","pie-16-background-size":"0%","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","source-arrow-fill":"filled","target-arrow-fill":"filled","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":$$.is.touch()?40:15,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125})};$$.styfn.clear=function(){this._private.newStyle=true;for(var i=0;i<this.length;i++){delete this[i]}this.length=0;return this};$$.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};$$.styfn.core=function(){return this._private.coreStyle};$$.styfn.parse=function(name,value,propIsBypass,propIsFlat){name=$$.util.camel2dash(name);var property=$$.style.properties[name];var passedValue=value;if(!property){return null}if(value===undefined||value===null){return null}var valueIsString=$$.is.string(value);if(valueIsString){value=$$.util.trim(value)}var type=property.type;if(!type){return null}if(propIsBypass&&(value===""||value===null)){return{name:name,value:value,bypass:true,deleteBypass:true}}var data,mapData,layoutData,mapLayoutData;if(!valueIsString||propIsFlat){}else if((data=new RegExp($$.style.types.data.regex).exec(value))||(layoutData=new RegExp($$.style.types.layoutData.regex).exec(value))){var isLayout=layoutData!==undefined;data=data||layoutData;return{name:name,value:data,strValue:""+value,mapped:isLayout?$$.style.types.layoutData:$$.style.types.data,field:data[1],bypass:propIsBypass}}else if((mapData=new RegExp($$.style.types.mapData.regex).exec(value))||(mapLayoutData=new RegExp($$.style.types.mapLayoutData.regex).exec(value))){var isLayout=mapLayoutData!==undefined;mapData=mapData||mapLayoutData;if(!(type.color||type.number)){return false}var valueMin=this.parse(name,mapData[4]);if(!valueMin||valueMin.mapped){return false}var valueMax=this.parse(name,mapData[5]);if(!valueMax||valueMax.mapped){return false}if(valueMin.value===valueMax.value){return false}else if(type.color){var c1=valueMin.value;var c2=valueMax.value;var same=c1[0]===c2[0]&&c1[1]===c2[1]&&c1[2]===c2[2]&&(c1[3]===c2[3]||(c1[3]==null||c1[3]===1)&&(c2[3]==null||c2[3]===1));if(same){return false}}return{name:name,value:mapData,strValue:""+value,mapped:isLayout?$$.style.types.mapLayoutData:$$.style.types.mapData,field:mapData[1],fieldMin:parseFloat(mapData[2]),fieldMax:parseFloat(mapData[3]),valueMin:valueMin.value,valueMax:valueMax.value,bypass:propIsBypass}}if(type.number){var units;var implicitUnit="px";if(type.units){units=type.units}if(!type.unitless){if(valueIsString){var unitsRegex="px|em"+(type.allowPercent?"|\\%":"");if(units){unitsRegex=units}var match=value.match("^("+$$.util.regex.number+")("+unitsRegex+")?"+"$");if(match){value=match[1];units=match[2]||implicitUnit}}else if(!units){units=implicitUnit}}value=parseFloat(value);if(isNaN(value)&&type.enums===undefined){return null}if(isNaN(value)&&type.enums!==undefined){value=passedValue;for(var i=0;i<type.enums.length;i++){var en=type.enums[i];if(en===value){return{name:name,value:value,strValue:""+value,bypass:propIsBypass}}}return null}if(type.integer&&!$$.is.integer(value)){return null}if(type.min!==undefined&&value<type.min||type.max!==undefined&&value>type.max){return null}var ret={name:name,value:value,strValue:""+value+(units?units:""),units:units,bypass:propIsBypass};if(type.unitless||units!=="px"&&units!=="em"){}else{ret.pxValue=units==="px"||!units?value:this.getEmSizeInPixels()*value}return ret}else if(type.propList){var props=[];var propsStr=""+value;if(propsStr==="none"){}else{var propsSplit=propsStr.split(",");for(var i=0;i<propsSplit.length;i++){var propName=$$.util.trim(propsSplit[i]);if($$.style.properties[propName]){props.push(propName)}}if(props.length===0){return null}}return{name:name,value:props,strValue:props.length===0?"none":props.join(", "),bypass:propIsBypass}}else if(type.color){var tuple=$$.util.color2tuple(value);if(!tuple){return null}return{name:name,value:tuple,strValue:""+value,bypass:propIsBypass}}else if(type.enums){for(var i=0;i<type.enums.length;i++){var en=type.enums[i];if(en===value){return{name:name,value:value,strValue:""+value,bypass:propIsBypass}}}return null}else if(type.regex){var regex=new RegExp(type.regex);var m=regex.exec(value);if(m){return{name:name,value:m,strValue:""+value,bypass:propIsBypass}}else{return null}}else if(type.string){return{name:name,value:value,strValue:""+value,bypass:propIsBypass}}else{return null}};$$.styfn.selector=function(selectorStr){var selector=selectorStr==="core"?null:new $$.Selector(selectorStr);var i=this.length++;this[i]={selector:selector,properties:[]};return this};$$.styfn.css=function(){var args=arguments;switch(args.length){case 1:var map=args[0];for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var mapVal=map[prop.name];if(mapVal===undefined){mapVal=map[$$.util.dash2camel(prop.name)]}if(mapVal!==undefined){this.cssRule(prop.name,mapVal)}}break;case 2:this.cssRule(args[0],args[1]);break;default:break}return this};$$.styfn.cssRule=function(name,value){var property=this.parse(name,value);if(property){var i=this.length-1;this[i].properties.push(property);var currentSelectorIsCore=!this[i].selector;if(currentSelectorIsCore){this._private.coreStyle[property.name]=property}}return this}})(cytoscape);(function($$){"use strict";$$.styfn.apply=function(eles){var self=this;for(var ie=0;ie<eles.length;ie++){var ele=eles[ie];var _p=ele._private;var addedCxts=[];var removedCxts=[];if(self._private.newStyle){_p.styleCxts=[];_p.style={}}for(var i=0;i<this.length;i++){var context=this[i];var contextSelectorMatches=context.selector&&context.selector.filter(ele).length>0;var props=context.properties;var newCxt=!_p.styleCxts[i];if(contextSelectorMatches){for(var j=0;j<props.length;j++){var prop=props[j];var currentEleProp=_p.style[prop.name];var propIsFirstInEle=currentEleProp&&currentEleProp.context===context;var needToUpdateCxtMapping=prop.mapped&&propIsFirstInEle;if(newCxt||needToUpdateCxtMapping){this.applyParsedProperty(ele,prop,context)}}ele._private.styleCxts[i]=context;if(self._private.newStyle===false&&newCxt){addedCxts.push(context)}}else{if(_p.styleCxts[i]){this.rollBackContext(ele,context);removedCxts.push(context)}delete _p.styleCxts[i]}}if(addedCxts.length>0||removedCxts.length>0){this.updateTransitions(ele,addedCxts,removedCxts)}self.updateStyleHints(ele)}self._private.newStyle=false};$$.styfn.updateStyleHints=function(ele){var _p=ele._private;var hasPie=false;if(_p.group==="nodes"){for(var i=1;i<=$$.style.pieBackgroundN;i++){var size=_p.style["pie-"+i+"-background-size"].value;if(size>0){hasPie=true;break}}}_p.hasPie=hasPie;var transform=_p.style["text-transform"].strValue;var content=_p.style["content"].strValue;var fStyle=_p.style["font-style"].strValue;var size=_p.style["font-size"].pxValue+"px";var family=_p.style["font-family"].strValue;var variant=_p.style["font-variant"].strValue;var weight=_p.style["font-weight"].strValue;_p.labelKey=fStyle+"$"+size+"$"+family+"$"+variant+"$"+weight+"$"+content+"$"+transform;_p.fontKey=fStyle+"$"+weight+"$"+size+"$"+family};$$.styfn.rollBackContext=function(ele,context){for(var j=0;j<context.properties.length;j++){var prop=context.properties[j];var eleProp=ele._private.style[prop.name];if(eleProp.bypassed){eleProp=eleProp.bypassed}var first=true;var lastEleProp;var l=0;while(eleProp.prev){var prev=eleProp.prev;if(eleProp.context===context){if(first){ele._private.style[prop.name]=prev}else if(lastEleProp){lastEleProp.prev=prev}}lastEleProp=eleProp;eleProp=prev;first=false;l++}}};$$.styfn.applyParsedProperty=function(ele,parsedProp,context){parsedProp=$$.util.clone(parsedProp);var prop=parsedProp;var style=ele._private.style;var fieldVal,flatProp;var type=$$.style.properties[prop.name].type;var propIsBypass=prop.bypass;var origProp=style[prop.name];var origPropIsBypass=origProp&&origProp.bypass;if((parsedProp.name==="height"||parsedProp.name==="width")&&parsedProp.value==="auto"&&ele.isNode()&&!ele.isParent()){return false}if(propIsBypass&&prop.deleteBypass){var currentProp=style[prop.name];if(!currentProp){return true}else if(currentProp.bypass&&currentProp.bypassed){style[prop.name]=currentProp.bypassed;return true}else{return false}}switch(prop.mapped){case $$.style.types.mapData:case $$.style.types.mapLayoutData:var isLayout=prop.mapped===$$.style.types.mapLayoutData;var fields=prop.field.split(".");var fieldVal=isLayout?ele._private.layoutData:ele._private.data;for(var i=0;i<fields.length&&fieldVal;i++){var field=fields[i];fieldVal=fieldVal[field]}var percent;if(!$$.is.number(fieldVal)){percent=0}else{percent=(fieldVal-prop.fieldMin)/(prop.fieldMax-prop.fieldMin)}if(type.color){var r1=prop.valueMin[0];var r2=prop.valueMax[0];var g1=prop.valueMin[1];var g2=prop.valueMax[1];var b1=prop.valueMin[2];var b2=prop.valueMax[2];var a1=prop.valueMin[3]==null?1:prop.valueMin[3];var a2=prop.valueMax[3]==null?1:prop.valueMax[3];var clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b2-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:"rgba("+clr[0]+", "+clr[1]+", "+clr[2]+", "+clr[3]}}else if(type.number){var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass,true)}else{return false}if(!flatProp){flatProp=this.parse(prop.name,origProp.strValue,prop.bypass,true)}flatProp.mapping=prop;prop=flatProp;break;case $$.style.types.data:case $$.style.types.layoutData:var isLayout=prop.mapped===$$.style.types.layoutData;var fields=prop.field.split(".");var fieldVal=isLayout?ele._private.layoutData:ele._private.data;for(var i=0;i<fields.length&&fieldVal;i++){var field=fields[i];fieldVal=fieldVal[field]}flatProp=this.parse(prop.name,fieldVal,prop.bypass,true);if(!flatProp){flatProp=this.parse(prop.name,origProp.strValue,prop.bypass,true)}flatProp.mapping=prop;prop=flatProp;break;case undefined:break;default:return false}if(propIsBypass){if(origPropIsBypass){prop.bypassed=origProp.bypassed}else{prop.bypassed=origProp}style[prop.name]=prop}else{var prevProp;if(origPropIsBypass){prevProp=origProp.bypassed;origProp.bypassed=prop}else{prevProp=style[prop.name];style[prop.name]=prop}if(prevProp&&prevProp.mapping&&prop.mapping&&prevProp.context===context){prevProp=prevProp.prev}if(prevProp&&prevProp!==prop){prop.prev=prevProp}}prop.context=context;return true};$$.styfn.update=function(){var cy=this._private.cy;var eles=cy.elements();eles.updateStyle()};$$.styfn.updateMappers=function(eles){for(var i=0;i<eles.length;i++){var ele=eles[i];var style=ele._private.style;for(var j=0;j<$$.style.properties.length;j++){var prop=$$.style.properties[j];var propInStyle=style[prop.name];if(propInStyle&&propInStyle.mapping){var mapping=propInStyle.mapping;this.applyParsedProperty(ele,mapping)}}this.updateStyleHints(ele)}};$$.styfn.updateTransitions=function(ele,addedCxts,removedCxts){var self=this;var style=ele._private.style;var props=style["transition-property"].value;var duration=style["transition-duration"].value*1e3;var delay=style["transition-delay"].value*1e3;var css={};if(props.length>0&&duration>0){var anyPrev=false;for(var i=0;i<props.length;i++){var prop=props[i];var styProp=style[prop];var fromProp=styProp.prev;var toProp=style[prop];var diff=false;var fromAddedCxt=false;var fromRemovedCxt=false;for(var j=0;j<addedCxts.length;j++){var cxt=addedCxts[j];if(cxt===toProp.context){fromAddedCxt=true;break}}for(var j=removedCxts.length-1;j>=0;j--){var cxt=removedCxts[j];for(var k=0;k<cxt.properties.length;k++){var cProp=cxt.properties[k];if(cProp.name===prop){fromRemovedCxt=true;fromProp=cProp;break}}if(fromRemovedCxt){break}}if(!fromAddedCxt&&!fromRemovedCxt){continue}if($$.is.number(fromProp.pxValue)&&$$.is.number(toProp.pxValue)){diff=fromProp.pxValue!==toProp.pxValue}else if($$.is.number(fromProp.value)&&$$.is.number(toProp.value)){diff=fromProp.value!==toProp.value}else if($$.is.array(fromProp.value)&&$$.is.array(toProp.value)){diff=fromProp.value[0]!==toProp.value[0]||fromProp.value[1]!==toProp.value[1]||fromProp.value[2]!==toProp.value[2]}if(diff){css[prop]=toProp.strValue;this.applyBypass(ele,prop,fromProp.strValue);anyPrev=true}}if(!anyPrev){return}ele._private.transitioning=true;ele.stop();if(delay>0){ele.delay(delay)}ele.animate({css:css},{duration:duration,queue:false,complete:function(){self.removeAllBypasses(ele);ele._private.transitioning=false}})}else if(ele._private.transitioning){ele.stop();this.removeAllBypasses(ele);ele._private.transitioning=false}}})(cytoscape);(function($$){"use strict";$$.styfn.applyBypass=function(eles,name,value){var props=[];if(name==="*"||name==="**"){if(value!==undefined){for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var name=prop.name;var parsedProp=this.parse(name,value,true);if(parsedProp){props.push(parsedProp)}}}}else if($$.is.string(name)){var parsedProp=this.parse(name,value,true);if(parsedProp){props.push(parsedProp)}}else if($$.is.plainObject(name)){var specifiedProps=name;for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var name=prop.name;var value=specifiedProps[name];if(value===undefined){value=specifiedProps[$$.util.dash2camel(name)]}if(value!==undefined){var parsedProp=this.parse(name,value,true);if(parsedProp){props.push(parsedProp)}}}}else{return false}if(props.length===0){return false}var ret=false;for(var i=0;i<eles.length;i++){var ele=eles[i];for(var j=0;j<props.length;j++){var prop=props[j];ret=this.applyParsedProperty(ele,prop)||ret}}return ret};$$.styfn.removeAllBypasses=function(eles){for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var name=prop.name;var value="";var parsedProp=this.parse(name,value,true);for(var j=0;j<eles.length;j++){var ele=eles[j];this.applyParsedProperty(ele,parsedProp)}}}})(cytoscape);(function($$,window){"use strict";$$.styfn.getEmSizeInPixels=function(){var cy=this._private.cy;var domElement=cy.container();if(window&&domElement&&window.getComputedStyle){var pxAsStr=window.getComputedStyle(domElement).getPropertyValue("font-size");var px=parseFloat(pxAsStr);return px}else{return 1}};$$.styfn.containerCss=function(propName){var cy=this._private.cy;var domElement=cy.container();if(window&&domElement&&window.getComputedStyle){return window.getComputedStyle(domElement).getPropertyValue(propName)}};$$.styfn.containerProperty=function(propName){var propStr=this.containerCss(propName);var prop=this.parse(propName,propStr);return prop};$$.styfn.containerPropertyAsString=function(propName){var prop=this.containerProperty(propName);if(prop){return prop.strValue}}})(cytoscape,typeof window==="undefined"?null:window);(function($$){"use strict";$$.styfn.getRenderedStyle=function(ele){var ele=ele[0];if(ele){var rstyle={};var style=ele._private.style;var cy=this._private.cy;var zoom=cy.zoom();for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var styleProp=style[prop.name];if(styleProp){var val=styleProp.unitless?styleProp.strValue:styleProp.pxValue*zoom+"px";rstyle[prop.name]=val;rstyle[$$.util.dash2camel(prop.name)]=val}}return rstyle}};$$.styfn.getRawStyle=function(ele){var ele=ele[0];if(ele){var rstyle={};var style=ele._private.style;for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var styleProp=style[prop.name];if(styleProp){rstyle[prop.name]=styleProp.strValue;rstyle[$$.util.dash2camel(prop.name)]=styleProp.strValue}}return rstyle}};$$.styfn.getValueStyle=function(ele){var rstyle,style;if($$.is.element(ele)){rstyle={};style=ele._private.style}else{rstyle={};style=ele}if(style){for(var i=0;i<$$.style.properties.length;i++){var prop=$$.style.properties[i];var styleProp=style[prop.name]||style[$$.util.dash2camel(prop.name)];if(styleProp!==undefined&&!$$.is.plainObject(styleProp)){styleProp=this.parse(prop.name,styleProp)}if(styleProp){var val=styleProp.value===undefined?styleProp:styleProp.value;rstyle[prop.name]=val;rstyle[$$.util.dash2camel(prop.name)]=val}}}return rstyle}})(cytoscape);(function($$){"use strict";$$.style.applyFromJson=function(style,json){for(var i=0;i<json.length;i++){var context=json[i];var selector=context.selector;var props=context.css;style.selector(selector);for(var name in props){var value=props[name];style.css(name,value)}}return style};$$.style.fromJson=function(cy,json){var style=new $$.Style(cy);
$$.style.applyFromJson(style,json);return style};$$.styfn.fromJson=function(json){var style=this;style.resetToDefault();$$.style.applyFromJson(style,json);return style};$$.styfn.json=function(){var json=[];for(var i=0;i<this.length;i++){var cxt=this[i];var selector=cxt.selector;var props=cxt.properties;var css={};for(var j=0;j<props.length;j++){var prop=props[j];css[prop.name]=prop.strValue}json.push({selector:!selector?"core":selector.toString(),css:css})}return json}})(cytoscape);(function($$){"use strict";$$.style.applyFromString=function(style,string){var remaining=""+string;var selAndBlockStr;var blockRem;var propAndValStr;remaining=remaining.replace(/[/][*](\s|.)+?[*][/]/g,"");function removeSelAndBlockFromRemaining(){if(remaining.length>selAndBlockStr.length){remaining=remaining.substr(selAndBlockStr.length)}else{remaining=""}}function removePropAndValFromRem(){if(blockRem.length>propAndValStr.length){blockRem=blockRem.substr(propAndValStr.length)}else{blockRem=""}}while(true){var nothingLeftToParse=remaining.match(/^\s*$/);if(nothingLeftToParse){break}var selAndBlock=remaining.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!selAndBlock){$$.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+remaining);break}selAndBlockStr=selAndBlock[0];var selectorStr=selAndBlock[1];var selector=new $$.Selector(selectorStr);if(selector._private.invalid){$$.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+selectorStr);removeSelAndBlockFromRemaining();continue}var blockStr=selAndBlock[2];var invalidBlock=false;blockRem=blockStr;var props=[];while(true){var nothingLeftToParse=blockRem.match(/^\s*$/);if(nothingLeftToParse){break}var propAndVal=blockRem.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!propAndVal){$$.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+blockStr);invalidBlock=true;break}propAndValStr=propAndVal[0];var propStr=propAndVal[1];var valStr=propAndVal[2];var prop=$$.style.properties[propStr];if(!prop){$$.util.error("Skipping property: Invalid property name in: "+propAndValStr);removePropAndValFromRem();continue}var parsedProp=style.parse(propStr,valStr);if(!parsedProp){$$.util.error("Skipping property: Invalid property definition in: "+propAndValStr);removePropAndValFromRem();continue}props.push({name:propStr,val:valStr});removePropAndValFromRem()}if(invalidBlock){removeSelAndBlockFromRemaining();break}style.selector(selectorStr);for(var i=0;i<props.length;i++){var prop=props[i];style.css(prop.name,prop.val)}removeSelAndBlockFromRemaining()}return style};$$.style.fromString=function(cy,string){var style=new $$.Style(cy);$$.style.applyFromString(style,string);return style};$$.styfn.fromString=function(string){var style=this;style.resetToDefault();$$.style.applyFromString(style,string);return style}})(cytoscape);(function($$){"use strict";$$.stylesheet=$$.Stylesheet=function(){if(!(this instanceof $$.Stylesheet)){return new $$.Stylesheet}this.length=0};$$.Stylesheet.prototype.selector=function(selector){var i=this.length++;this[i]={selector:selector,properties:[]};return this};$$.Stylesheet.prototype.css=function(name,value){var i=this.length-1;if($$.is.string(name)){this[i].properties.push({name:name,value:value})}else if($$.is.plainObject(name)){var map=name;for(var j=0;j<$$.style.properties.length;j++){var prop=$$.style.properties[j];var mapVal=map[prop.name];if(mapVal===undefined){mapVal=map[$$.util.dash2camel(prop.name)]}if(mapVal!==undefined){var name=prop.name;var value=mapVal;this[i].properties.push({name:name,value:value})}}}return this};$$.Stylesheet.prototype.generateStyle=function(cy){var style=new $$.Style(cy);for(var i=0;i<this.length;i++){var context=this[i];var selector=context.selector;var props=context.properties;style.selector(selector);for(var j=0;j<props.length;j++){var prop=props[j];style.css(prop.name,prop.value)}}return style}})(cytoscape);(function($$,window){"use strict";var isTouch=$$.is.touch();var defaults={hideEdgesOnViewport:false};var origDefaults=$$.util.copy(defaults);$$.defaults=function(opts){defaults=$$.util.extend({},origDefaults,opts)};$$.fn.core=function(fnMap,options){for(var name in fnMap){var fn=fnMap[name];$$.Core.prototype[name]=fn}};$$.Core=function(opts){if(!(this instanceof $$.Core)){return new $$.Core(opts)}var cy=this;opts=$$.util.extend({},defaults,opts);var container=opts.container;var reg=$$.getRegistrationForInstance(cy,container);if(reg&&reg.cy){reg.domElement.innerHTML="";reg.cy.notify({type:"destroy"});$$.removeRegistrationForInstance(reg.cy,reg.domElement)}reg=$$.registerInstance(cy,container);var readies=reg.readies;var options=opts;options.layout=$$.util.extend({name:window&&container?"grid":"null"},options.layout);options.renderer=$$.util.extend({name:window&&container?"canvas":"null"},options.renderer);var _p=this._private={ready:false,initrender:false,instanceId:reg.id,options:options,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:options.zoomingEnabled===undefined?true:options.zoomingEnabled,userZoomingEnabled:options.userZoomingEnabled===undefined?true:options.userZoomingEnabled,panningEnabled:options.panningEnabled===undefined?true:options.panningEnabled,userPanningEnabled:options.userPanningEnabled===undefined?true:options.userPanningEnabled,boxSelectionEnabled:options.boxSelectionEnabled===undefined?true:options.boxSelectionEnabled,autolockNodes:false,autoungrabifyNodes:options.autoungrabifyNodes===undefined?false:options.autoungrabifyNodes,zoom:$$.is.number(options.zoom)?options.zoom:1,pan:{x:$$.is.plainObject(options.pan)&&$$.is.number(options.pan.x)?options.pan.x:0,y:$$.is.plainObject(options.pan)&&$$.is.number(options.pan.y)?options.pan.y:0},hasCompoundNodes:false};var selType=options.selectionType;if(selType===undefined||selType!=="additive"&&selType!=="single"){if(isTouch){_p.selectionType="additive"}else{_p.selectionType="single"}}else{_p.selectionType=selType}if($$.is.number(options.minZoom)&&$$.is.number(options.maxZoom)&&options.minZoom<options.maxZoom){_p.minZoom=options.minZoom;_p.maxZoom=options.maxZoom}else if($$.is.number(options.minZoom)&&options.maxZoom===undefined){_p.minZoom=options.minZoom}else if($$.is.number(options.maxZoom)&&options.minZoom===undefined){_p.maxZoom=options.maxZoom}if($$.is.stylesheet(options.style)){_p.style=options.style.generateStyle(this)}else if($$.is.array(options.style)){_p.style=$$.style.fromJson(this,options.style)}else if($$.is.string(options.style)){_p.style=$$.style.fromString(this,options.style)}else{_p.style=new $$.Style(cy)}cy.initRenderer($$.util.extend({hideEdgesOnViewport:options.hideEdgesOnViewport,hideLabelsOnViewport:options.hideLabelsOnViewport,textureOnViewport:options.textureOnViewport},options.renderer));if(options.initrender){cy.on("initrender",options.initrender);cy.on("initrender",function(){cy._private.initrender=true})}cy.load(options.elements,function(){cy.startAnimationLoop();cy._private.ready=true;if($$.is.fn(options.ready)){cy.bind("ready",options.ready)}for(var i=0;i<readies.length;i++){var fn=readies[i];cy.bind("ready",fn)}reg.readies=[];cy.trigger("ready")},options.done)};$$.corefn=$$.Core.prototype;$$.fn.core({ready:function(){return this._private.ready},initrender:function(){return this._private.initrender},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(id){var index=this._private.id2index[id];if(index!==undefined){return this._private.elements[index]}return new $$.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(eles){var elements=this._private.elements;var id2index=this._private.id2index;for(var i=0;i<eles.length;i++){var ele=eles[i];var id=ele._private.data.id;var index=id2index[id];var alreadyInPool=index!==undefined;if(!alreadyInPool){index=elements.length;elements.push(ele);id2index[id]=index;ele._private.index=index}}return this},removeFromPool:function(eles){var elements=this._private.elements;var id2index=this._private.id2index;for(var i=0;i<eles.length;i++){var ele=eles[i];var id=ele._private.data.id;var index=id2index[id];var inPool=index!==undefined;if(inPool){delete this._private.id2index[id];elements.splice(index,1);for(var j=index;j<elements.length;j++){var jid=elements[j]._private.data.id;id2index[jid]--}}}},container:function(){return this._private.options.container},options:function(){return $$.util.copy(this._private.options)},json:function(params){var json={};var cy=this;json.elements={};cy.elements().each(function(i,ele){var group=ele.group();if(!json.elements[group]){json.elements[group]=[]}json.elements[group].push(ele.json())});json.style=cy.style().json();json.scratch=cy.scratch();json.zoomingEnabled=cy._private.zoomingEnabled;json.userZoomingEnabled=cy._private.userZoomingEnabled;json.zoom=cy._private.zoom;json.minZoom=cy._private.minZoom;json.maxZoom=cy._private.maxZoom;json.panningEnabled=cy._private.panningEnabled;json.userPanningEnabled=cy._private.userPanningEnabled;json.pan=cy._private.pan;json.boxSelectionEnabled=cy._private.boxSelectionEnabled;json.layout=cy._private.options.layout;json.renderer=cy._private.options.renderer;json.hideEdgesOnViewport=cy._private.options.hideEdgesOnViewport;json.hideLabelsOnViewport=cy._private.options.hideLabelsOnViewport;json.textureOnViewport=cy._private.options.textureOnViewport;return json}})})(cytoscape,typeof window==="undefined"?null:window);(function($$,window){"use strict";function ready(f){var fn=document&&(document.readyState==="interactive"||document.readyState==="complete")?f:ready;setTimeout(fn,9,f)}$$.fn.core({add:function(opts){var elements;var cy=this;if($$.is.elementOrCollection(opts)){var eles=opts;if(eles._private.cy===cy){elements=eles.restore()}else{var jsons=[];for(var i=0;i<eles.length;i++){var ele=eles[i];jsons.push(ele.json())}elements=new $$.Collection(cy,jsons)}}else if($$.is.array(opts)){var jsons=opts;elements=new $$.Collection(cy,jsons)}else if($$.is.plainObject(opts)&&($$.is.array(opts.nodes)||$$.is.array(opts.edges))){var elesByGroup=opts;var jsons=[];var grs=["nodes","edges"];for(var i=0,il=grs.length;i<il;i++){var group=grs[i];var elesArray=elesByGroup[group];if($$.is.array(elesArray)){for(var j=0,jl=elesArray.length;j<jl;j++){var json=elesArray[j];var mjson=$$.util.extend({},json,{group:group});jsons.push(mjson)}}}elements=new $$.Collection(cy,jsons)}else{var json=opts;elements=new $$.Element(cy,json).collection()}return elements},remove:function(collection){if($$.is.elementOrCollection(collection)){collection=collection}else if($$.is.string(collection)){var selector=collection;collection=this.$(selector)}return collection.remove()},load:function(elements,onload,ondone){var cy=this;var oldEles=cy.elements();if(oldEles.length>0){oldEles.remove()}cy.notifications(false);if(elements!=null){if($$.is.plainObject(elements)||$$.is.array(elements)){cy.add(elements)}}function callback(){cy.one("layoutready",function(e){cy.notifications(true);cy.trigger(e);cy.notify({type:"load",collection:cy.elements()});cy.one("load",onload);cy.trigger("load")}).one("layoutstop",function(){cy.one("done",ondone);cy.trigger("done")});cy.layout(cy._private.options.layout)}if(window){ready(callback)}else{callback()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function($$,window){"use strict";$$.fn.core({addToAnimationPool:function(eles){var cy=this;var aniEles=cy._private.aniEles;var aniElesHas=[];for(var i=0;i<aniEles.length;i++){var id=aniEles[i]._private.data.id;aniElesHas[id]=true}for(var i=0;i<eles.length;i++){var ele=eles[i];var id=ele._private.data.id;if(!aniElesHas[id]){aniEles.push(ele)}}},startAnimationLoop:function(){var cy=this;var stepDelay=1e3/60;var useTimeout=false;var useRequestAnimationFrame=true;if(!window){return}cy._private.aniEles=[];var requestAnimationFrame=$$.util.requestAnimationFrame;if(requestAnimationFrame==null||!useRequestAnimationFrame){requestAnimationFrame=function(fn){window.setTimeout(function(){fn(+new Date)},stepDelay)}}var containerDom=cy.container();function globalAnimationStep(){function exec(){requestAnimationFrame(function(now){handleElements(now);globalAnimationStep()},containerDom)}if(useTimeout){setTimeout(function(){exec()},stepDelay)}else{exec()}}globalAnimationStep();function handleElements(now){now=+new Date;var eles=cy._private.aniEles;for(var e=0;e<eles.length;e++){var ele=eles[e];var current=ele._private.animation.current;var queue=ele._private.animation.queue;if(current.length===0){var q=queue;var next=q.length>0?q.shift():null;if(next!=null){next.callTime=+new Date;current.push(next)}}var completes=[];for(var i=0;i<current.length;i++){var ani=current[i];step(ele,ani,now);if(current[i].done){completes.push(ani);current.splice(i,1);i--}}for(var i=0;i<completes.length;i++){var ani=completes[i];var complete=ani.params.complete;if($$.is.fn(complete)){complete.apply(ele,[now])}}}if(eles.length>0){cy.notify({type:"draw",collection:eles})}for(var i=0;i<eles.length;i++){var ele=eles[i];var queue=ele._private.animation.queue;var current=ele._private.animation.current;var keepEle=current.length>0||queue.length>0;if(!keepEle){eles.splice(i,1);i--}}}function step(self,animation,now){var style=cy._private.style;var properties=animation.properties;var params=animation.params;var startTime=animation.callTime;var percent;if(animation.duration===0){percent=1}else{percent=Math.min(1,(now-startTime)/animation.duration)}if(percent<0){percent=0}else if(percent>1){percent=1}if(properties.delay==null){var startPos=animation.startPosition;var endPos=properties.position;var pos=self._private.position;if(endPos){if(valid(startPos.x,endPos.x)){pos.x=ease(startPos.x,endPos.x,percent)}if(valid(startPos.y,endPos.y)){pos.y=ease(startPos.y,endPos.y,percent)}}if(properties.css){var props=$$.style.properties;for(var i=0;i<props.length;i++){var name=props[i].name;var end=properties.css[name];if(end!==undefined){var start=animation.startStyle[name];var easedVal=ease(start,end,percent);style.applyBypass(self,name,easedVal)}}}}if($$.is.fn(params.step)){params.step.apply(self,[now])}if(percent>=1){animation.done=true}return percent}function valid(start,end){if(start==null||end==null){return false}if($$.is.number(start)&&$$.is.number(end)){return true}else if(start&&end){return true}return false}function ease(start,end,percent){if(percent<0){percent=0}else if(percent>1){percent=1}if($$.is.number(start)&&$$.is.number(end)){return start+(end-start)*percent}else if($$.is.number(start[0])&&$$.is.number(end[0])){var c1=start;var c2=end;var ch=function(ch1,ch2){var diff=ch2-ch1;var min=ch1;return Math.round(percent*diff+min)};var r=ch(c1[0],c2[0]);var g=ch(c1[1],c2[1]);var b=ch(c1[2],c2[2]);return"rgb("+r+", "+g+", "+b+")"}return undefined}}})})(cytoscape,typeof window==="undefined"?null:window);(function($$){"use strict";$$.fn.core({data:$$.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:$$.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:$$.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:$$.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:$$.define.removeData({field:"scratch",triggerEvent:false})})})(cytoscape);(function($$){"use strict";$$.fn.core({on:$$.define.on(),one:$$.define.on({unbindSelfOnTrigger:true}),once:$$.define.on({unbindAllBindersOnTrigger:true}),off:$$.define.off(),trigger:$$.define.trigger()});$$.corefn.bind=$$.corefn.on;$$.corefn.unbind=$$.corefn.off})(cytoscape);(function($$){"use strict";$$.fn.core({png:function(options){var cy=this;var renderer=this._private.renderer;options=options||{};return renderer.png(options)}})})(cytoscape);(function($$){"use strict";$$.fn.core({layout:function(params){var cy=this;if(this._private.layoutRunning){return this}if(params==null){params=this._private.options.layout}this.initLayout(params);cy.trigger("layoutstart");this._private.layoutRunning=true;this.one("layoutstop",function(){cy._private.layoutRunning=false});this._private.layout.run();return this},initLayout:function(options){if(options==null){$$.util.error("Layout options must be specified to run a layout");return}if(options.name==null){$$.util.error("A `name` must be specified to run a layout");return}var name=options.name;var layoutProto=$$.extension("layout",name);if(layoutProto==null){$$.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",name);return}this._private.layout=new layoutProto($$.util.extend({},options,{renderer:this._private.renderer,cy:this}));this._private.options.layout=options}})})(cytoscape);(function($$){"use strict";$$.fn.core({notify:function(params){if(!this._private.notificationsEnabled){return}var renderer=this.renderer();var cy=this;if($$.is.element(params.collection)){var element=params.collection;params.collection=new $$.Collection(cy,[element])}else if($$.is.array(params.collection)){var elements=params.collection;params.collection=new $$.Collection(cy,elements)}renderer.notify(params)},notifications:function(bool){var p=this._private;if(bool===undefined){return p.notificationsEnabled}else{p.notificationsEnabled=bool?true:false}},noNotifications:function(callback){this.notifications(false);callback();this.notifications(true)}})})(cytoscape);(function($$){"use strict";$$.fn.core({renderTo:function(context,zoom,pan,pxRatio){var r=this._private.renderer;r.renderTo(context,zoom,pan,pxRatio);return this},renderer:function(){return this._private.renderer},forceRender:function(){this.notify({type:"draw"});return this},resize:function(){this.notify({type:"resize"});return this},initRenderer:function(options){var cy=this;var rendererProto=$$.extension("renderer",options.name);if(rendererProto==null){$$.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",options.name);return}this._private.renderer=new rendererProto($$.util.extend({},options,{cy:cy,style:cy._private.style}))},recalculateRenderedStyle:function(){var renderer=this.renderer();if(renderer.recalculateRenderedStyle){renderer.recalculateRenderedStyle()}}})})(cytoscape);(function($$){"use strict";$$.fn.core({collection:function(eles){if($$.is.string(eles)){return this.$(eles)}else if($$.is.elementOrCollection(eles)){return eles.collection()}return new $$.Collection(this)},nodes:function(selector){var nodes=this.$("node");if(selector){return nodes.filter(selector)}return nodes},edges:function(selector){var edges=this.$("edge");if(selector){return edges.filter(selector)}return edges},$:function(selector){var eles=new $$.Collection(this,this._private.elements);if(selector){return eles.filter(selector)}return eles}});$$.corefn.elements=$$.corefn.filter=$$.corefn.$})(cytoscape);(function($$){"use strict";$$.fn.core({style:function(val){return this._private.style}})})(cytoscape);(function($$){"use strict";$$.fn.core({autolockNodes:function(bool){if(bool!==undefined){this._private.autolockNodes=bool?true:false}else{return this._private.autolockNodes}return this},autoungrabifyNodes:function(bool){if(bool!==undefined){this._private.autoungrabifyNodes=bool?true:false}else{return this._private.autoungrabifyNodes}return this},panningEnabled:function(bool){if(bool!==undefined){this._private.panningEnabled=bool?true:false}else{return this._private.panningEnabled}return this},userPanningEnabled:function(bool){if(bool!==undefined){this._private.userPanningEnabled=bool?true:false}else{return this._private.userPanningEnabled}return this},zoomingEnabled:function(bool){if(bool!==undefined){this._private.zoomingEnabled=bool?true:false}else{return this._private.zoomingEnabled}return this},userZoomingEnabled:function(bool){if(bool!==undefined){this._private.userZoomingEnabled=bool?true:false}else{return this._private.userZoomingEnabled}return this},boxSelectionEnabled:function(bool){if(bool!==undefined){this._private.boxSelectionEnabled=bool?true:false}else{return this._private.boxSelectionEnabled}return this},pan:function(){var args=arguments;var pan=this._private.pan;var dim,val,dims,x,y;switch(args.length){case 0:return pan;case 1:if(!this._private.panningEnabled){return this}else if($$.is.string(args[0])){dim=args[0];return pan[dim]}else if($$.is.plainObject(args[0])){dims=args[0];x=dims.x;y=dims.y;if($$.is.number(x)){pan.x=x}if($$.is.number(y)){pan.y=y}this.trigger("pan")}break;case 2:if(!this._private.panningEnabled){return this}dim=args[0];val=args[1];if((dim==="x"||dim==="y")&&$$.is.number(val)){pan[dim]=val}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},panBy:function(params){var args=arguments;var pan=this._private.pan;var dim,val,dims,x,y;if(!this._private.panningEnabled){return this}switch(args.length){case 1:if($$.is.plainObject(args[0])){dims=args[0];x=dims.x;y=dims.y;if($$.is.number(x)){pan.x+=x}if($$.is.number(y)){pan.y+=y}this.trigger("pan")}break;case 2:dim=args[0];val=args[1];if((dim==="x"||dim==="y")&&$$.is.number(val)){pan[dim]+=val}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(elements,padding){if($$.is.number(elements)&&padding===undefined){padding=elements;elements=undefined}if(!this._private.panningEnabled||!this._private.zoomingEnabled){return this}if($$.is.string(elements)){var sel=elements;elements=this.$(sel)}else if(!$$.is.elementOrCollection(elements)){elements=this.elements()}var bb=elements.boundingBox();var style=this.style();var w=parseFloat(style.containerCss("width"));var h=parseFloat(style.containerCss("height"));var zoom;padding=$$.is.number(padding)?padding:0;if(!isNaN(w)&&!isNaN(h)&&elements.length>0){zoom=this._private.zoom=Math.min((w-2*padding)/bb.w,(h-2*padding)/bb.h);zoom=zoom>this._private.maxZoom?this._private.maxZoom:zoom;zoom=zoom<this._private.minZoom?this._private.minZoom:zoom;this._private.pan={x:(w-zoom*(bb.x1+bb.x2))/2,y:(h-zoom*(bb.y1+bb.y2))/2};this.trigger("pan zoom");this.notify({type:"viewport"})}return this},minZoom:function(zoom){if(zoom===undefined){return this._private.minZoom}else if($$.is.number(zoom)){this._private.minZoom=zoom}return this},maxZoom:function(zoom){if(zoom===undefined){return this._private.maxZoom}else if($$.is.number(zoom)){this._private.maxZoom=zoom}return this},zoom:function(params){var pos;var zoom;if(params===undefined){return this._private.zoom}else if($$.is.number(params)){zoom=params}else if($$.is.plainObject(params)){zoom=params.level;if(params.position){var p=params.position;var pan=this._private.pan;var z=this._private.zoom;pos={x:p.x*z+pan.x,y:p.y*z+pan.y}}else if(params.renderedPosition){pos=params.renderedPosition}if(pos&&!this._private.panningEnabled){return this}}if(!this._private.zoomingEnabled){return this}if(!$$.is.number(zoom)||pos&&(!$$.is.number(pos.x)||!$$.is.number(pos.y))){return this}zoom=zoom>this._private.maxZoom?this._private.maxZoom:zoom;zoom=zoom<this._private.minZoom?this._private.minZoom:zoom;if(pos){var pan1=this._private.pan;var zoom1=this._private.zoom;var zoom2=zoom;var pan2={x:-zoom2/zoom1*(pos.x-pan1.x)+pos.x,y:-zoom2/zoom1*(pos.y-pan1.y)+pos.y};this._private.zoom=zoom;this._private.pan=pan2;var posChanged=pan1.x!==pan2.x||pan1.y!==pan2.y;this.trigger("zoom"+(posChanged?" pan":""))}else{this._private.zoom=zoom;this.trigger("zoom")}this.notify({type:"viewport"});return this},boundingBox:function(selector){var eles=this.$(selector);return eles.boundingBox()},renderedBoundingBox:function(selector){var eles=this.$(selector);return eles.renderedBoundingBox()},center:function(elements){if(!this._private.panningEnabled||!this._private.zoomingEnabled){return this}if($$.is.string(elements)){var selector=elements;elements=cy.elements(selector)}else if(!$$.is.elementOrCollection(elements)){elements=cy.elements()}var bb=elements.boundingBox();var style=this.style();var w=parseFloat(style.containerCss("width"));var h=parseFloat(style.containerCss("height"));var zoom=this._private.zoom;this.pan({x:(w-zoom*(bb.x1+bb.x2))/2,y:(h-zoom*(bb.y1+bb.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panningEnabled||!this._private.zoomingEnabled){return this}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function($$){"use strict";$$.fn.collection=$$.fn.eles=function(fnMap,options){for(var name in fnMap){var fn=fnMap[name];$$.Collection.prototype[name]=fn}};var idFactory={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(cy,element,tryThisId){var json=$$.is.element(element)?element._private:element;var group=json.group;var id=tryThisId!=null?tryThisId:this.prefix[group]+this.id[group];if(cy.getElementById(id).empty()){this.id[group]++}else{while(!cy.getElementById(id).empty()){id=this.prefix[group]+ ++this.id[group]}}return id}};$$.Element=function(cy,params,restore){if(!(this instanceof $$.Element)){return new $$.Element(cy,params,restore)}var self=this;restore=restore===undefined||restore?true:false;if(cy===undefined||params===undefined||!$$.is.core(cy)){$$.util.error("An element must have a core reference and parameters set");return}if(params.group!=="nodes"&&params.group!=="edges"){$$.util.error("An element must be of type `nodes` or `edges`; you specified `"+params.group+"`");return}this.length=1;this[0]=this;this._private={cy:cy,single:true,data:params.data||{},layoutData:{},position:params.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:params.group,style:{},rstyle:{},styleCxts:[],removed:true,selected:params.selected?true:false,selectable:params.selectable===undefined?true:params.selectable?true:false,locked:params.locked?true:false,grabbed:false,grabbable:params.grabbable===undefined?true:params.grabbable?true:false,active:false,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};if(params.renderedPosition){var rpos=params.renderedPosition;var pan=cy.pan();var zoom=cy.zoom();this._private.position={x:(rpos.x-pan.x)/zoom,y:(rpos.y-pan.y)/zoom}}if($$.is.string(params.classes)){var classes=params.classes.split(/\s+/);for(var i=0,l=classes.length;i<l;i++){var cls=classes[i];if(!cls||cls===""){continue}self._private.classes[cls]=true}}if(params.css){cy.style().applyBypass(this,params.css)}if(restore===undefined||restore){this.restore()}};$$.Collection=function(cy,elements){if(!(this instanceof $$.Collection)){return new $$.Collection(cy,elements)}if(cy===undefined||!$$.is.core(cy)){$$.util.error("A collection must have a reference to the core");return}var ids={};var createdElements=false;if(!elements){elements=[]}else if(elements.length>0&&$$.is.plainObject(elements[0])&&!$$.is.element(elements[0])){createdElements=true;var eles=[];var elesIds={};for(var i=0,l=elements.length;i<l;i++){var json=elements[i];if(json.data==null){json.data={}}var data=json.data;if(data.id==null){data.id=idFactory.generate(cy,json)}else if(cy.getElementById(data.id).length!=0||elesIds[data.id]){continue}var ele=new $$.Element(cy,json,false);eles.push(ele);elesIds[data.id]=true}elements=eles}this.length=0;for(var i=0,l=elements.length;i<l;i++){var element=elements[i];if(!element){continue}var id=element._private.data.id;if(!ids[id]){ids[id]=element;this[this.length]=element;this.length++}}this._private={cy:cy,ids:ids};if(createdElements){this.restore()}};$$.elefn=$$.elesfn=$$.Element.prototype=$$.Collection.prototype;$$.elesfn.cy=function(){return this._private.cy};$$.elesfn.element=function(){return this[0]};$$.elesfn.collection=function(){if($$.is.collection(this)){return this}else{return new $$.Collection(this._private.cy,[this])}};$$.elesfn.json=function(){var ele=this.element();if(ele==null){return undefined}var p=ele._private;var json=$$.util.copy({data:p.data,position:p.position,group:p.group,bypass:p.bypass,removed:p.removed,selected:p.selected,selectable:p.selectable,locked:p.locked,grabbed:p.grabbed,grabbable:p.grabbable,classes:""});var classes=[];for(var cls in p.classes){classes.push(cls)}for(var i=0;i<classes.length;i++){var cls=classes[i];json.classes+=cls+(i<classes.length-1?" ":"")}return json};$$.elesfn.jsons=function(){var jsons=[];for(var i=0;i<this.length;i++){var ele=this[i];var json=ele.json();jsons.push(json)}return jsons};$$.elesfn.restore=function(notifyRenderer){var self=this;var restored=[];var cy=self.cy();if(notifyRenderer===undefined){notifyRenderer=true}var elements=[];var nodes=[],edges=[];var numNodes=0;var numEdges=0;for(var i=0,l=self.length;i<l;i++){var ele=self[i];if(ele.isNode()){nodes.push(ele);numNodes++}else{edges.push(ele);numEdges++}}elements=nodes.concat(edges);for(var i=0,l=elements.length;i<l;i++){var ele=elements[i];if(!ele.removed()){continue}var _private=ele._private;var data=_private.data;if(data.id===undefined){data.id=idFactory.generate(cy,ele)}else if($$.is.emptyString(data.id)||!$$.is.string(data.id)){$$.util.error("Can not create element with invalid string ID `"+data.id+"`");continue}else if(cy.getElementById(data.id).length!=0){$$.util.error("Can not create second element with ID `"+data.id+"`");continue}var id=data.id;if(ele.isEdge()){var edge=ele;var fields=["source","target"];var fieldsLength=fields.length;var badSourceOrTarget=false;for(var j=0;j<fieldsLength;j++){var field=fields[j];var val=data[field];if(val==null||val===""){$$.util.error("Can not create edge `"+data.id+"` with unspecified "+field);badSourceOrTarget=true}else if(cy.getElementById(val).empty()){$$.util.error("Can not create edge `"+data.id+"` with nonexistant "+field+" `"+val+"`");badSourceOrTarget=true}}if(badSourceOrTarget){continue}var src=cy.getElementById(data.source);var tgt=cy.getElementById(data.target);src._private.edges.push(edge);tgt._private.edges.push(edge);edge._private.source=src;edge._private.target=tgt}_private.ids={};_private.ids[data.id]=ele;_private.removed=false;cy.addToPool(ele);restored.push(ele)}for(var i=0;i<numNodes;i++){var node=elements[i];var data=node._private.data;var id=data.id;var parentId=node._private.data.parent;var specifiedParent=parentId!=null;if(specifiedParent){var parent=cy.getElementById(parentId);if(parent.empty()){delete data.parent}else{var selfAsParent=false;var ancestor=parent;while(!ancestor.empty()){if(node.same(ancestor)){selfAsParent=true;delete data.parent;break}ancestor=ancestor.parent()}if(!selfAsParent){parent[0]._private.children.push(node);cy._private.hasCompoundNodes=true}}}}restored=new $$.Collection(cy,restored);if(restored.length>0){var toUpdateStyle=restored.add(restored.connectedNodes()).add(restored.parent());toUpdateStyle.updateStyle(notifyRenderer);if(notifyRenderer){restored.rtrigger("add")}else{restored.trigger("add")}}return self};$$.elesfn.removed=function(){var ele=this[0];return ele&&ele._private.removed};$$.elesfn.inside=function(){var ele=this[0];return ele&&!ele._private.removed};$$.elesfn.remove=function(notifyRenderer){var self=this;var removed=[];var elesToRemove=[];var elesToRemoveIds={};var cy=self._private.cy;if(notifyRenderer===undefined){notifyRenderer=true}function addConnectedEdges(node){var edges=node._private.edges;for(var i=0;i<edges.length;i++){add(edges[i])}}function addChildren(node){var children=node._private.children;for(var i=0;i<children.length;i++){add(children[i])}}function add(ele){var alreadyAdded=elesToRemoveIds[ele.id()];if(alreadyAdded){return}else{elesToRemoveIds[ele.id()]=true}if(ele.isNode()){elesToRemove.push(ele);
addConnectedEdges(ele);addChildren(ele)}else{elesToRemove.unshift(ele)}}for(var i=0,l=self.length;i<l;i++){var ele=self[i];add(ele)}function removeEdgeRef(node,edge){var connectedEdges=node._private.edges;for(var j=0;j<connectedEdges.length;j++){var connectedEdge=connectedEdges[j];if(edge===connectedEdge){connectedEdges.splice(j,1);break}}}function removeChildRef(parent,ele){ele=ele[0];parent=parent[0];var children=parent._private.children;for(var j=0;j<children.length;j++){if(children[j][0]===ele[0]){children.splice(j,1);break}}}for(var i=0;i<elesToRemove.length;i++){var ele=elesToRemove[i];ele._private.removed=true;cy.removeFromPool(ele);removed.push(ele);if(ele.isEdge()){var src=ele.source()[0];var tgt=ele.target()[0];removeEdgeRef(src,ele);removeEdgeRef(tgt,ele)}else{var parent=ele.parent();if(parent.length!==0){removeChildRef(parent,ele)}}}var elesStillInside=cy._private.elements;cy._private.hasCompoundNodes=false;for(var i=0;i<elesStillInside.length;i++){var ele=elesStillInside[i];if(ele.isParent()){cy._private.hasCompoundNodes=true;break}}var removedElements=new $$.Collection(this.cy(),removed);if(removedElements.size()>0){if(notifyRenderer){this.cy().notify({type:"remove",collection:removedElements})}removedElements.trigger("remove")}var checkedParentId={};for(var i=0;i<elesToRemove.length;i++){var ele=elesToRemove[i];var isNode=ele._private.group==="nodes";var parentId=ele._private.data.parent;if(isNode&&parentId!==undefined&&!checkedParentId[parentId]){checkedParentId[parentId]=true;var parent=cy.getElementById(parentId);if(parent&&parent.length!==0&&!parent._private.removed&&parent.children().length===0){parent.updateStyle()}}}return this}})(cytoscape);(function($$){"use strict";$$.fn.eles({breadthFirstSearch:function(roots,fn,directed){directed=arguments.length===1&&!$$.is.fn(fn)?fn:directed;fn=$$.is.fn(fn)?fn:function(){};var cy=this._private.cy;var v=$$.is.string(roots)?this.filter(roots):roots;var Q=[];var connectedEles=[];var connectedFrom={};var id2depth={};var V={};var j=0;var found;var nodes=this.nodes();var edges=this.edges();for(var i=0;i<v.length;i++){if(v[i].isNode()){Q.unshift(v[i]);V[v[i].id()]=true;connectedEles.push(v[i]);id2depth[v[i].id()]=0}}while(Q.length!==0){var v=Q.shift();var depth=id2depth[v.id()];var ret=fn.call(v,j++,depth);if(ret===true){found=v;break}if(ret===false){break}var vwEdges=v.connectedEdges(directed?'[source = "'+v.id()+'"]':undefined).intersect(edges);for(var i=0;i<vwEdges.length;i++){var e=vwEdges[i];var w=e.connectedNodes('[id != "'+v.id()+'"]').intersect(nodes);if(w.length!==0&&!V[w.id()]){w=w[0];Q.push(w);V[w.id()]=true;id2depth[w.id()]=id2depth[v.id()]+1;connectedEles.push(w);connectedEles.push(e)}}}return{path:new $$.Collection(cy,connectedEles),found:new $$.Collection(cy,found)}},depthFirstSearch:function(roots,fn,directed){directed=arguments.length===1&&!$$.is.fn(fn)?fn:directed;fn=$$.is.fn(fn)?fn:function(){};var cy=this._private.cy;var v=$$.is.string(roots)?this.filter(roots):roots;var S=[];var connectedNodes=[];var connectedBy={};var id2depth={};var discovered={};var j=0;var found;var edges=this.edges();var nodes=this.nodes();for(var i=0;i<v.length;i++){if(v[i].isNode()){S.push(v[i]);connectedNodes.push(v[i]);id2depth[v[i].id()]=0}}while(S.length!==0){var v=S.pop();if(!discovered[v.id()]){discovered[v.id()]=true;var depth=id2depth[v.id()];var ret=fn.call(v,j++,depth);if(ret===true){found=v;break}if(ret===false){break}var vwEdges=v.connectedEdges(directed?'[source = "'+v.id()+'"]':undefined).intersect(edges);for(var i=0;i<vwEdges.length;i++){var e=vwEdges[i];var w=e.connectedNodes('[id != "'+v.id()+'"]').intersect(nodes);if(w.length!==0&&!discovered[w.id()]){w=w[0];S.push(w);id2depth[w.id()]=id2depth[v.id()]+1;connectedNodes.push(w);connectedBy[w.id()]=e}}}}var connectedEles=[];for(var i=0;i<connectedNodes.length;i++){var node=connectedNodes[i];var edge=connectedBy[node.id()];if(edge){connectedEles.push(edge)}connectedEles.push(node)}return{path:new $$.Collection(cy,connectedEles),found:new $$.Collection(cy,found)}},kruskal:function(weightFn){weightFn=$$.is.fn(weightFn)?weightFn:function(){return 1};function findSet(ele){for(var i=0;i<forest.length;i++){var eles=forest[i];if(eles.anySame(ele)){return{eles:eles,index:i}}}}var A=new $$.Collection(this._private.cy,[]);var forest=[];var nodes=this.nodes();for(var i=0;i<nodes.length;i++){forest.push(nodes[i].collection())}var edges=this.edges();var S=edges.toArray().sort(function(a,b){var weightA=weightFn.call(a);var weightB=weightFn.call(b);return weightA-weightB});for(var i=0;i<S.length;i++){var edge=S[i];var u=edge.source()[0];var v=edge.target()[0];var setU=findSet(u);var setV=findSet(v);if(setU.index!==setV.index){A=A.add(edge);forest[setU.index]=setU.eles.add(setV.eles);forest.splice(setV.index,1)}}return nodes.add(A)},dijkstra:function(root,weightFn,directed){var cy=this._private.cy;directed=!$$.is.fn(weightFn)?weightFn:directed;weightFn=$$.is.fn(weightFn)?weightFn:function(){return 1};var source=$$.is.string(root)?this.filter(root)[0]:root[0];var dist={};var prev={};var knownDist={};var edges=this.edges().not(":loop");var nodes=this.nodes();var Q=[];for(var i=0;i<nodes.length;i++){dist[nodes[i].id()]=nodes[i].id()===source.id()?0:Infinity;Q.push(nodes[i])}var valueFn=function(node){return dist[node.id()]};Q=new $$.Collection(cy,Q);var heap=$$.Minheap(cy,Q,valueFn);var distBetween=function(u,v){var uvs=(directed?u.edgesTo(v):u.edgesWith(v)).intersect(edges);var smallestDistance=Infinity;var smallestEdge;for(var i=0;i<uvs.length;i++){var edge=uvs[i];var weight=weightFn.call(edge);if(weight<smallestDistance||!smallestEdge){smallestDistance=weight;smallestEdge=edge}}return{edge:smallestEdge,dist:smallestDistance}};while(heap.size()>0){var smallestEl=heap.pop(),smalletsDist=smallestEl.value,uid=smallestEl.id,u=cy.getElementById(uid);knownDist[uid]=smalletsDist;if(smalletsDist===Math.Infinite){break}var neighbors=u.neighborhood().intersect(nodes);for(var i=0;i<neighbors.length;i++){var v=neighbors[i];var vid=v.id();var vDist=distBetween(u,v);var alt=smalletsDist+vDist.dist;if(alt<heap.getValueById(vid)){heap.edit(vid,alt);prev[vid]={node:u,edge:vDist.edge}}}}return{distanceTo:function(node){var target=$$.is.string(node)?nodes.filter(node)[0]:node[0];return knownDist[target.id()]},pathTo:function(node){var target=$$.is.string(node)?nodes.filter(node)[0]:node[0];var S=[];var u=target;S.unshift(target);while(prev[u.id()]){var p=prev[u.id()];S.unshift(p.edge);S.unshift(p.node);u=p.node}return new $$.Collection(cy,S)}}}});$$.elesfn.bfs=$$.elesfn.breadthFirstSearch;$$.elesfn.dfs=$$.elesfn.depthFirstSearch})(cytoscape);(function($$){"use strict";$$.fn.eles({animated:function(){var ele=this[0];if(ele){return ele._private.animation.current.length>0}},clearQueue:function(){for(var i=0;i<this.length;i++){var ele=this[i];ele._private.animation.queue=[]}return this},delay:function(time,complete){this.animate({delay:time},{duration:time,complete:complete});return this},animate:function(properties,params){var callTime=+new Date;var cy=this._private.cy;var style=cy.style();var q;if(params===undefined){params={}}if(params.duration===undefined){params.duration=400}switch(params.duration){case"slow":params.duration=600;break;case"fast":params.duration=200;break}if(properties==null||properties.position==null&&properties.renderedPosition==null&&properties.css==null&&properties.delay==null){return this}if(properties.css){properties.css=style.getValueStyle(properties.css)}if(properties.renderedPosition){var rpos=properties.renderedPosition;var pan=cy.pan();var zoom=cy.zoom();properties.position={x:(rpos.x-pan.x)/zoom,y:(rpos.y-pan.y)/zoom}}for(var i=0;i<this.length;i++){var self=this[i];var pos=self._private.position;var startPosition={x:pos.x,y:pos.y};var startStyle=style.getValueStyle(self);if(self.animated()&&(params.queue===undefined||params.queue)){q=self._private.animation.queue}else{q=self._private.animation.current}q.push({properties:properties,duration:params.duration,params:params,callTime:callTime,startPosition:startPosition,startStyle:startStyle})}cy.addToAnimationPool(this);return this},stop:function(clearQueue,jumpToEnd){for(var i=0;i<this.length;i++){var self=this[i];var anis=self._private.animation.current;for(var j=0;j<anis.length;j++){var animation=anis[j];if(jumpToEnd){animation.duration=0}}if(clearQueue){self._private.animation.queue=[]}if(!jumpToEnd){self._private.animation.current=[]}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function($$){"use strict";$$.fn.eles({addClass:function(classes){classes=classes.split(/\s+/);var self=this;var changed=[];for(var i=0;i<classes.length;i++){var cls=classes[i];if($$.is.emptyString(cls)){continue}for(var j=0;j<self.length;j++){var ele=self[j];var hasClass=ele._private.classes[cls];ele._private.classes[cls]=true;if(!hasClass){changed.push(ele)}}}if(changed.length>0){new $$.Collection(this._private.cy,changed).updateStyle()}self.trigger("class");return self},hasClass:function(className){var ele=this[0];return ele!=null&&ele._private.classes[className]?true:false},toggleClass:function(classesStr,toggle){var classes=classesStr.split(/\s+/);var self=this;var changed=[];for(var i=0,il=self.length;i<il;i++){var ele=self[i];for(var j=0;j<classes.length;j++){var cls=classes[j];if($$.is.emptyString(cls)){continue}var hasClass=ele._private.classes[cls];var shouldAdd=toggle||toggle===undefined&&!hasClass;if(shouldAdd){ele._private.classes[cls]=true;if(!hasClass){changed.push(ele)}}else{ele._private.classes[cls]=false;if(hasClass){changed.push(ele)}}}}if(changed.length>0){new $$.Collection(this._private.cy,changed).updateStyle()}self.trigger("class");return self},removeClass:function(classes){classes=classes.split(/\s+/);var self=this;var changed=[];for(var i=0;i<self.length;i++){var ele=self[i];for(var j=0;j<classes.length;j++){var cls=classes[j];if(!cls||cls===""){continue}var hasClass=ele._private.classes[cls];delete ele._private.classes[cls];if(hasClass){changed.push(ele)}}}if(changed.length>0){new $$.Collection(self._private.cy,changed).updateStyle()}self.trigger("class");return self}})})(cytoscape);(function($$){"use strict";$$.fn.eles({allAre:function(selector){return this.filter(selector).length===this.length},is:function(selector){return this.filter(selector).length>0},same:function(collection){collection=this.cy().collection(collection);if(this.length!==collection.length){return false}return this.intersect(collection).length===this.length},anySame:function(collection){collection=this.cy().collection(collection);return this.intersect(collection).length>0},allAreNeighbors:function(collection){collection=this.cy().collection(collection);return this.neighborhood().intersect(collection).length===collection.length}})})(cytoscape);(function($$){"use strict";$$.fn.eles({parent:function(selector){var parents=[];var cy=this._private.cy;for(var i=0;i<this.length;i++){var ele=this[i];var parent=cy.getElementById(ele._private.data.parent);if(parent.size()>0){parents.push(parent)}}return new $$.Collection(cy,parents).filter(selector)},parents:function(selector){var parents=[];var eles=this.parent();while(eles.nonempty()){for(var i=0;i<eles.length;i++){var ele=eles[i];parents.push(ele)}eles=eles.parent()}return new $$.Collection(this.cy(),parents).filter(selector)},children:function(selector){var children=[];for(var i=0;i<this.length;i++){var ele=this[i];children=children.concat(ele._private.children)}return new $$.Collection(this.cy(),children).filter(selector)},siblings:function(selector){return this.parent().children().not(this).filter(selector)},isParent:function(){var ele=this[0];if(ele){return ele._private.children.length!==0}},isChild:function(){var ele=this[0];if(ele){return ele._private.data.parent!==undefined&&ele.parent().length!==0}},descendants:function(selector){var elements=[];function add(eles){for(var i=0;i<eles.length;i++){var ele=eles[i];elements.push(ele);if(ele.children().nonempty()){add(ele.children())}}}add(this.children());return new $$.Collection(this.cy(),elements).filter(selector)}});$$.elesfn.ancestors=$$.elesfn.parents})(cytoscape);(function($$){"use strict";var borderWidthMultiplier=2*.5;var borderWidthAdjustment=0;$$.fn.eles({data:$$.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:$$.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:$$.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:$$.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:$$.define.removeData({field:"scratch",triggerEvent:false}),rscratch:$$.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:$$.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var ele=this[0];if(ele){return ele._private.data.id}},position:$$.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"],onSet:function(eles){var updatedEles=eles.updateCompoundBounds();updatedEles.rtrigger("position")},canSet:function(ele){return!ele.locked()}}),silentPosition:$$.define.data({field:"position",bindingEvent:"position",allowBinding:false,allowSetting:true,settingEvent:"position",settingTriggersEvent:false,triggerFnName:"trigger",allowGetting:true,validKeys:["x","y"],onSet:function(eles){eles.updateCompoundBounds()},canSet:function(ele){return!ele.locked()}}),positions:function(pos,silent){if($$.is.plainObject(pos)){this.position(pos)}else if($$.is.fn(pos)){var fn=pos;for(var i=0;i<this.length;i++){var ele=this[i];var pos=fn.apply(ele,[i,ele]);if(pos&&!ele.locked()){var elePos=ele._private.position;elePos.x=pos.x;elePos.y=pos.y}}var updatedEles=this.updateCompoundBounds();var toTrigger=this.add(updatedEles);if(silent){toTrigger.trigger("position")}else{toTrigger.rtrigger("position")}}return this},updateCompoundBounds:function(){var cy=this.cy();if(!cy.hasCompoundNodes()){return cy.collection()}var updated=[];function update(parent){var children=parent.children();var style=parent._private.style;var bb=children.boundingBox({includeLabels:false,includeEdges:false});var padding={top:style["padding-top"].pxValue,bottom:style["padding-bottom"].pxValue,left:style["padding-left"].pxValue,right:style["padding-right"].pxValue};var pos=parent._private.position;var didUpdate=false;if(style["width"].value==="auto"){parent._private.autoWidth=bb.w+padding.left+padding.right;pos.x=(bb.x1+bb.x2-padding.left+padding.right)/2;didUpdate=true}if(style["height"].value==="auto"){parent._private.autoHeight=bb.h+padding.top+padding.bottom;pos.y=(bb.y1+bb.y2-padding.top+padding.bottom)/2;didUpdate=true}if(didUpdate){updated.push(parent)}}var eles=this.parent();while(eles.nonempty()){for(var i=0;i<eles.length;i++){var ele=eles[i];update(ele)}eles=eles.parent()}return new $$.Collection(cy,updated)},renderedPosition:function(dim,val){var ele=this[0];var cy=this.cy();var zoom=cy.zoom();var pan=cy.pan();var rpos=$$.is.plainObject(dim)?dim:undefined;var setting=rpos!==undefined||val!==undefined&&$$.is.string(dim);if(ele&&ele.isNode()){if(setting){for(var i=0;i<this.length;i++){var ele=this[i];if(val!==undefined){ele._private.position[dim]=(val-pan[dim])/zoom}else if(rpos!==undefined){ele._private.position={x:(rpos.x-pan.x)/zoom,y:(rpos.y-pan.y)/zoom}}}this.rtrigger("position")}else{var pos=ele._private.position;rpos={x:pos.x*zoom+pan.x,y:pos.y*zoom+pan.y};if(dim===undefined){return rpos}else{return rpos[dim]}}}else if(!setting){return undefined}return this},width:function(){var ele=this[0];if(ele){var w=ele._private.style.width;return w.strValue==="auto"?ele._private.autoWidth:w.pxValue}},outerWidth:function(){var ele=this[0];if(ele){var style=ele._private.style;var width=style.width.strValue==="auto"?ele._private.autoWidth:style.width.pxValue;var border=style["border-width"]?style["border-width"].pxValue*borderWidthMultiplier+borderWidthAdjustment:0;return width+border}},renderedWidth:function(){var ele=this[0];if(ele){var width=ele.width();return width*this.cy().zoom()}},renderedOuterWidth:function(){var ele=this[0];if(ele){var owidth=ele.outerWidth();return owidth*this.cy().zoom()}},height:function(){var ele=this[0];if(ele&&ele.isNode()){var h=ele._private.style.height;return h.strValue==="auto"?ele._private.autoHeight:h.pxValue}},outerHeight:function(){var ele=this[0];if(ele){var style=ele._private.style;var height=style.height.strValue==="auto"?ele._private.autoHeight:style.height.pxValue;var border=style["border-width"]?style["border-width"].pxValue*borderWidthMultiplier+borderWidthAdjustment:0;return height+border}},renderedHeight:function(){var ele=this[0];if(ele){var height=ele.height();return height*this.cy().zoom()}},renderedOuterHeight:function(){var ele=this[0];if(ele){var oheight=ele.outerHeight();return oheight*this.cy().zoom()}},renderedBoundingBox:function(options){var bb=this.boundingBox(options);var cy=this.cy();var zoom=cy.zoom();var pan=cy.pan();var x1=bb.x1*zoom+pan.x;var x2=bb.x2*zoom+pan.x;var y1=bb.y1*zoom+pan.y;var y2=bb.y2*zoom+pan.y;return{x1:x1,x2:x2,y1:y1,y2:y2,w:x2-x1,h:y2-y1}},boundingBox:function(options){var eles=this;options=$$.util.extend({includeNodes:true,includeEdges:true,includeLabels:true},options);this.cy().recalculateRenderedStyle();var x1=Infinity;var x2=-Infinity;var y1=Infinity;var y2=-Infinity;for(var i=0;i<eles.length;i++){var ele=eles[i];var ex1,ex2,ey1,ey2,x,y;var includedEle=false;if(ele.css("display")==="none"){continue}if(ele.isNode()&&options.includeNodes){includedEle=true;var pos=ele._private.position;x=pos.x;y=pos.y;var w=ele.outerWidth();var halfW=w/2;var h=ele.outerHeight();var halfH=h/2;ex1=x-halfW;ex2=x+halfW;ey1=y-halfH;ey2=y+halfH;x1=ex1<x1?ex1:x1;x2=ex2>x2?ex2:x2;y1=ey1<y1?ey1:y1;y2=ey2>y2?ey2:y2}else if(ele.isEdge()&&options.includeEdges){includedEle=true;var n1pos=ele.source()[0]._private.position;var n2pos=ele.target()[0]._private.position;var rstyle=ele._private.rstyle||{};ex1=n1pos.x;ex2=n2pos.x;ey1=n1pos.y;ey2=n2pos.y;if(ex1>ex2){var temp=ex1;ex1=ex2;ex2=temp}if(ey1>ey2){var temp=ey1;ey1=ey2;ey2=temp}x1=ex1<x1?ex1:x1;x2=ex2>x2?ex2:x2;y1=ey1<y1?ey1:y1;y2=ey2>y2?ey2:y2;var bpts=rstyle.bezierPts||[];var w=ele._private.style["width"].pxValue;for(var j=0;j<bpts.length;j++){var bpt=bpts[j];x1=bpt.x-w<x1?bpt.x-w:x1;x2=bpt.x+w>x2?bpt.x+w:x2;y1=bpt.y-w<y1?bpt.y-w:y1;y2=bpt.y+w>y2?bpt.y+w:y2}}var style=ele._private.style;var rstyle=ele._private.rstyle;var label=style["content"].strValue;var fontSize=style["font-size"];var halign=style["text-halign"];var valign=style["text-valign"];var labelWidth=rstyle.labelWidth;var labelHeight=rstyle.labelHeight;var labelX=rstyle.labelX;var labelY=rstyle.labelY;if(includedEle&&options.includeLabels&&label&&fontSize&&labelHeight!=undefined&&labelWidth!=undefined&&labelX!=undefined&&labelY!=undefined&&halign&&valign){var lh=labelHeight;var lw=labelWidth;var lx1,lx2,ly1,ly2;if(ele.isEdge()){lx1=labelX-lw/2;lx2=labelX+lw/2;ly1=labelY-lh/2;ly2=labelY+lh/2}else{switch(halign.value){case"left":lx1=labelX-lw;lx2=labelX;break;case"center":lx1=labelX-lw/2;lx2=labelX+lw/2;break;case"right":lx1=labelX;lx2=labelX+lw;break}switch(valign.value){case"top":ly1=labelY-lh;ly2=labelY;break;case"center":ly1=labelY-lh/2;ly2=labelY+lh/2;break;case"bottom":ly1=labelY;ly2=labelY+lh;break}}x1=lx1<x1?lx1:x1;x2=lx2>x2?lx2:x2;y1=ly1<y1?ly1:y1;y2=ly2>y2?ly2:y2}}return{x1:x1,x2:x2,y1:y1,y2:y2,w:x2-x1,h:y2-y1}}})})(cytoscape);(function($$){"use strict";function defineDegreeFunction(callback){return function(includeLoops){var self=this;if(includeLoops===undefined){includeLoops=true}if(self.length===0){return}if(self.isNode()&&!self.removed()){var degree=0;var node=self[0];var connectedEdges=node._private.edges;for(var i=0;i<connectedEdges.length;i++){var edge=connectedEdges[i];if(!includeLoops&&edge.isLoop()){continue}degree+=callback(node,edge)}return degree}else{return}}}$$.fn.eles({degree:defineDegreeFunction(function(node,edge){if(edge.source().same(edge.target())){return 2}else{return 1}}),indegree:defineDegreeFunction(function(node,edge){if(edge.target().same(node)){return 1}else{return 0}}),outdegree:defineDegreeFunction(function(node,edge){if(edge.source().same(node)){return 1}else{return 0}})});function defineDegreeBoundsFunction(degreeFn,callback){return function(includeLoops){var ret=undefined;var nodes=this.nodes();for(var i=0;i<nodes.length;i++){var ele=nodes[i];var degree=ele[degreeFn](includeLoops);if(degree!==undefined&&(ret===undefined||callback(degree,ret))){ret=degree}}return ret}}$$.fn.eles({minDegree:defineDegreeBoundsFunction("degree",function(degree,min){return degree<min}),maxDegree:defineDegreeBoundsFunction("degree",function(degree,max){return degree>max}),minIndegree:defineDegreeBoundsFunction("indegree",function(degree,min){return degree<min}),maxIndegree:defineDegreeBoundsFunction("indegree",function(degree,max){return degree>max}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,min){return degree<min}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,max){return degree>max})});$$.fn.eles({totalDegree:function(includeLoops){var total=0;var nodes=this.nodes();for(var i=0;i<nodes.length;i++){total+=nodes[i].degree(includeLoops)}return total}})})(cytoscape);(function($$){"use strict";$$.fn.eles({on:$$.define.on(),one:$$.define.on({unbindSelfOnTrigger:true}),once:$$.define.on({unbindAllBindersOnTrigger:true}),off:$$.define.off(),trigger:$$.define.trigger(),rtrigger:function(event,extraParams){if(this.length===0){return}this.cy().notify({type:event,collection:this.filter(function(){return!this.removed()})});this.trigger(event,extraParams);return this}});$$.elesfn.bind=$$.elesfn.on;$$.elesfn.unbind=$$.elesfn.off})(cytoscape);(function($$){"use strict";$$.fn.eles({nodes:function(selector){return this.filter(function(i,element){return element.isNode()}).filter(selector)},edges:function(selector){return this.filter(function(i,element){return element.isEdge()}).filter(selector)},filter:function(filter){var cy=this._private.cy;if($$.is.fn(filter)){var elements=[];for(var i=0;i<this.length;i++){var ele=this[i];if(filter.apply(ele,[i,ele])){elements.push(ele)}}return new $$.Collection(cy,elements)}else if($$.is.string(filter)||$$.is.elementOrCollection(filter)){return new $$.Selector(filter).filter(this)}else if(filter===undefined){return this}return new $$.Collection(cy)},not:function(toRemove){var cy=this._private.cy;if(!toRemove){return this}else{if($$.is.string(toRemove)){toRemove=this.filter(toRemove)}var elements=[];for(var i=0;i<this.length;i++){var element=this[i];var remove=toRemove._private.ids[element.id()];if(!remove){elements.push(element)}}return new $$.Collection(cy,elements)}},intersect:function(other){var self=this;var cy=this._private.cy;if($$.is.string(other)){var selector=other;return this.filter(selector)}var elements=[];var col1=this;var col2=other;var col1Smaller=this.length<other.length;var ids1=col1Smaller?col1._private.ids:col2._private.ids;var ids2=col1Smaller?col2._private.ids:col1._private.ids;for(var id in ids1){var ele=ids2[id];if(ele){elements.push(ele)}}return new $$.Collection(cy,elements)},add:function(toAdd){var self=this;var cy=this._private.cy;if(!toAdd){return this}if($$.is.string(toAdd)){var selector=toAdd;toAdd=cy.elements(selector)}var elements=[];for(var i=0;i<this.length;i++){elements.push(this[i])}for(var i=0;i<toAdd.length;i++){var add=!this._private.ids[toAdd[i].id()];if(add){elements.push(toAdd[i])}}return new $$.Collection(cy,elements)}})})(cytoscape);(function($$){"use strict";$$.fn.eles({isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var ele=this[0];if(ele){return ele._private.group}}})})(cytoscape);(function($$){"use strict";$$.fn.eles({each:function(fn){if($$.is.fn(fn)){for(var i=0;i<this.length;i++){var ele=this[i];var ret=fn.apply(ele,[i,ele]);if(ret===false){break}}}return this},toArray:function(){var array=[];for(var i=0;i<this.length;i++){array.push(this[i])}return array},slice:function(start,end){var array=[];var thisSize=this.length;if(end==null){end=thisSize}if(start==null){start=0}if(start<0){start=thisSize+start}if(end<0){end=thisSize+end}for(var i=start;i>=0&&i<end&&i<thisSize;i++){array.push(this[i])}return new $$.Collection(this.cy(),array)},size:function(){return this.length},eq:function(i){return this[i]},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(sortFn){if(!$$.is.fn(sortFn)){return this}var cy=this.cy();var coln=new $$.Collection(cy);var sorted=this.toArray().sort(sortFn);return new $$.Collection(cy,sorted)},sortByZIndex:function(){return this.sort($$.Collection.zIndexSort)}});$$.Collection.zIndexSort=function(a,b){var elementDepth=function(ele){if(ele._private.group==="nodes"){return ele._private.data.parent?ele.parents().size():0}else if(ele._private.group==="edges"){var source=ele._private.source;var target=ele._private.target;var sourceDepth=source._private.data.parent?source.parents().size():0;var targetDepth=target._private.data.parent?target.parents().size():0;return Math.max(sourceDepth,targetDepth)}else{return 0}};var result=a._private.style["z-index"].value-b._private.style["z-index"].value;var depthA=0;var depthB=0;if(a.cy().hasCompoundNodes()){depthA=elementDepth(a);depthB=elementDepth(b)}if(depthA-depthB===0){if(a._private.group==="nodes"&&b._private.group==="edges"){return 1}else if(a._private.group==="edges"&&b._private.group==="nodes"){return-1}else{if(result===0){return a._private.index-b._private.index}else{return result}}}else{return depthA-depthB}return 0}})(cytoscape);(function($$){"use strict";var borderWidthMultiplier=2*.5;var borderWidthAdjustment=0;$$.fn.eles({updateStyle:function(notifyRenderer){var cy=this._private.cy;var style=cy.style();notifyRenderer=notifyRenderer||notifyRenderer===undefined?true:false;style.apply(this);var updatedCompounds=this.updateCompoundBounds();if(notifyRenderer){this.add(updatedCompounds).rtrigger("style")}else{this.add(updatedCompounds).trigger("style")}return this},updateMappers:function(notifyRenderer){var cy=this._private.cy;var style=cy.style();notifyRenderer=notifyRenderer||notifyRenderer===undefined?true:false;style.updateMappers(this);var updatedCompounds=this.updateCompoundBounds();if(notifyRenderer){this.add(updatedCompounds).rtrigger("style")}else{this.add(updatedCompounds).trigger("style")}return this},renderedCss:function(property){var ele=this[0];if(ele){var renstyle=ele.cy().style().getRenderedStyle(ele);if(property===undefined){return renstyle}else{return renstyle[property]}}},css:function(name,value){var style=this.cy().style();if($$.is.plainObject(name)){var props=name;style.applyBypass(this,props);var updatedCompounds=this.updateCompoundBounds();this.add(updatedCompounds).rtrigger("style")}else if($$.is.string(name)){if(value===undefined){var ele=this[0];if(ele){return ele._private.style[name].strValue}else{return}}else{style.applyBypass(this,name,value);var updatedCompounds=this.updateCompoundBounds();this.add(updatedCompounds).rtrigger("style")}}else if(name===undefined){var ele=this[0];if(ele){return style.getRawStyle(ele)}else{return}}return this},removeCss:function(){var style=this.cy().style();var eles=this;for(var i=0;i<eles.length;i++){var ele=eles[i];style.removeAllBypasses(ele)}var updatedCompounds=this.updateCompoundBounds();this.add(updatedCompounds).rtrigger("style")},show:function(){this.css("display","element");return this},hide:function(){this.css("display","none");return this},visible:function(){var ele=this[0];var cy=this._private.cy;if(ele){var style=ele._private.style;if(style["visibility"].value!=="visible"||style["display"].value!=="element"){return false}if(ele._private.group==="nodes"){var parents=ele._private.data.parent?ele.parents():null;if(parents){for(var i=0;i<parents.length;i++){var parent=parents[i];var pStyle=parent._private.style;var pVis=pStyle["visibility"].value;var pDis=pStyle["display"].value;if(pVis!=="visible"||pDis!=="element"){return false}}}return true}else{var src=ele._private.source;var tgt=ele._private.target;return src.visible()&&tgt.visible()}}},hidden:function(){var ele=this[0];if(ele){return!ele.visible()}},effectiveOpacity:function(){var ele=this[0];if(ele){var parentOpacity=ele._private.style.opacity.value;var parents=!ele._private.data.parent?null:ele.parents();if(parents){for(var i=0;i<parents.length;i++){var parent=parents[i];var opacity=parent._private.style.opacity.value;parentOpacity=opacity*parentOpacity}}return parentOpacity}},transparent:function(){var ele=this[0];if(ele){return ele.effectiveOpacity()===0}},isFullAutoParent:function(){var ele=this[0];if(ele){var autoW=ele._private.style["width"].value==="auto";var autoH=ele._private.style["height"].value==="auto";return ele.isParent()&&autoW&&autoH}}});$$.elesfn.style=$$.elesfn.css;$$.elesfn.renderedStyle=$$.elesfn.renderedCss;$$.elesfn.removeStyle=$$.elesfn.removeCss})(cytoscape);(function($$){"use strict";function defineSwitchFunction(params){return function(){var args=arguments;if(args.length===2){var data=args[0];var handler=args[1];this.bind(params.event,data,handler)}else if(args.length===1){var handler=args[0];this.bind(params.event,handler)}else if(args.length===0){for(var i=0;i<this.length;i++){var ele=this[i];if(!params.ableField||ele._private[params.ableField]){ele._private[params.field]=params.value}}this.updateStyle();this.trigger(params.event)}return this}}function defineSwitchSet(params){$$.elesfn[params.field]=function(){var ele=this[0];if(ele){if(params.altFieldFn){var val=params.altFieldFn(ele);if(val!==undefined){return val}}return ele._private[params.field]}};$$.elesfn[params.on]=defineSwitchFunction({event:params.on,field:params.field,ableField:params.ableField,value:true});$$.elesfn[params.off]=defineSwitchFunction({event:params.off,field:params.field,ableField:params.ableField,value:false})}defineSwitchSet({field:"locked",altFieldFn:function(ele){return ele.cy().autolockNodes()?true:undefined},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",altFieldFn:function(ele){return ele.cy().autoungrabifyNodes()?false:undefined},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",on:"select",off:"unselect"});defineSwitchSet({field:"selectable",on:"selectify",off:"unselectify"});$$.elesfn.grabbed=function(){var ele=this[0];if(ele){return ele._private.grabbed}};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});$$.elesfn.inactive=function(){var ele=this[0];if(ele){return!ele._private.active}}})(cytoscape);(function($$){"use strict";$$.fn.eles({roots:function(selector){var eles=this;var roots=[];for(var i=0;i<eles.length;i++){var ele=eles[i];if(!ele.isNode()){continue}var hasEdgesPointingIn=ele.connectedEdges('[target = "'+ele.id()+'"][source != "'+ele.id()+'"]').length>0;if(!hasEdgesPointingIn){roots.push(ele)}}return new $$.Collection(this._private.cy,roots).filter(selector)},forwardNodes:function(selector){var eles=this;var fNodes=[];for(var i=0;i<eles.length;i++){var ele=eles[i];var eleId=ele.id();if(!ele.isNode()){continue}var edges=ele._private.edges;for(var j=0;j<edges.length;j++){var edge=edges[j];var srcId=edge._private.data.source;var tgtId=edge._private.data.target;if(srcId===eleId&&tgtId!==eleId){fNodes.push(edge.target()[0])
}}}return new $$.Collection(this._private.cy,fNodes).filter(selector)},backwardNodes:function(selector){var eles=this;var bNodes=[];for(var i=0;i<eles.length;i++){var ele=eles[i];var eleId=ele.id();if(!ele.isNode()){continue}var edges=ele._private.edges;for(var j=0;j<edges.length;j++){var edge=edges[j];var srcId=edge._private.data.source;var tgtId=edge._private.data.target;if(tgtId===eleId&&srcId!==eleId){bNodes.push(edge.source()[0])}}}return new $$.Collection(this._private.cy,bNodes).filter(selector)}});$$.fn.eles({neighborhood:function(selector){var elements=[];var cy=this._private.cy;var nodes=this.nodes();for(var i=0;i<nodes.length;i++){var node=nodes[i];var connectedEdges=node.connectedEdges();for(var j=0;j<connectedEdges.length;j++){var edge=connectedEdges[j];var otherNode=edge.connectedNodes().not(node);if(otherNode.length>0){elements.push(otherNode[0])}elements.push(edge[0])}}return new $$.Collection(cy,elements).filter(selector)},closedNeighborhood:function(selector){return this.neighborhood().add(this).filter(selector)},openNeighborhood:function(selector){return this.neighborhood(selector)}});$$.fn.eles({source:function(selector){var ele=this[0];var src;if(ele){src=ele._private.source}return new $$.Collection(this.cy(),src).filter(selector)},target:function(selector){var ele=this[0];var tgt;if(ele){tgt=ele._private.target}return new $$.Collection(this.cy(),tgt).filter(selector)},sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});function defineSourceFunction(params){return function(selector){var sources=[];var cy=this._private.cy;for(var i=0;i<this.length;i++){var ele=this[i];var src=ele._private[params.attr];if(src){sources.push(src)}}return new $$.Collection(cy,sources).filter(selector)}}$$.fn.eles({edgesWith:defineEdgesWithFunction(),edgesTo:defineEdgesWithFunction({thisIs:"source"})});function defineEdgesWithFunction(params){return function(otherNodes){var elements=[];var cy=this._private.cy;var p=params||{};if($$.is.string(otherNodes)){otherNodes=cy.$(otherNodes)}var edges=otherNodes.connectedEdges();var thisIds=this._private.ids;for(var i=0;i<edges.length;i++){var edge=edges[i];var foundId;var edgeData=edge._private.data;if(p.thisIs){var idToFind=edgeData[p.thisIs];foundId=thisIds[idToFind]}else{foundId=thisIds[edgeData.source]||thisIds[edgeData.target]}if(foundId){elements.push(edge)}}return new $$.Collection(cy,elements)}}$$.fn.eles({connectedEdges:function(selector){var retEles=[];var cy=this._private.cy;var eles=this;for(var i=0;i<eles.length;i++){var node=eles[i];if(!node.isNode()){continue}var edges=node._private.edges;for(var j=0;j<edges.length;j++){var edge=edges[j];retEles.push(edge)}}return new $$.Collection(cy,retEles).filter(selector)},connectedNodes:function(selector){var retEles=[];var cy=this._private.cy;var eles=this;for(var i=0;i<eles.length;i++){var edge=eles[i];if(!edge.isEdge()){continue}retEles.push(edge.source()[0]);retEles.push(edge.target()[0])}return new $$.Collection(cy,retEles).filter(selector)},parallelEdges:defineParallelEdgesFunction(),codirectedEdges:defineParallelEdgesFunction({codirected:true})});function defineParallelEdgesFunction(params){var defaults={codirected:false};params=$$.util.extend({},defaults,params);return function(selector){var cy=this._private.cy;var elements=[];var edges=this.edges();var p=params;for(var i=0;i<edges.length;i++){var edge1=edges[i];var src1=edge1.source()[0];var srcid1=src1.id();var tgt1=edge1.target()[0];var tgtid1=tgt1.id();var srcEdges1=src1._private.edges;for(var j=0;j<srcEdges1.length;j++){var edge2=srcEdges1[j];var edge2data=edge2._private.data;var tgtid2=edge2data.target;var srcid2=edge2data.source;var codirected=tgtid2===tgtid1&&srcid2===srcid1;var oppdirected=srcid1===tgtid2&&tgtid1===srcid2;if(p.codirected&&codirected||!p.codirected&&(codirected||oppdirected)){elements.push(edge2)}}}return new $$.Collection(cy,elements).filter(selector)}}})(cytoscape);(function($$){"use strict";$$.Minheap=function(cy,eles,valueFn){return new $$.Heap(cy,eles,$$.Heap.minHeapComparator,valueFn)};$$.Maxheap=function(cy,eles,valueFn){return new $$.Heap(cy,eles,$$.Heap.maxHeapComparator,valueFn)};$$.Heap=function(cy,eles,comparator,valueFn){if(typeof comparator==="undefined"||typeof eles==="undefined"){return}if(typeof valueFn==="undefined"){valueFn=$$.Heap.idFn}var sourceHeap=[],pointers={},elements=[],i=0,id,heap,elesLen;eles=this.getArgumentAsCollection(eles,cy);elesLen=eles.length;for(i=0;i<elesLen;i+=1){sourceHeap.push(valueFn.call(cy,eles[i],i,eles));id=eles[i].id();if(pointers.hasOwnProperty(id)){throw"ERROR: Multiple items with the same id found: "+id}pointers[id]=i;elements.push(id)}this._private={cy:cy,heap:sourceHeap,pointers:pointers,elements:elements,comparator:comparator,extractor:valueFn,length:elesLen};for(i=Math.floor(elesLen/2);i>=0;i-=1){heap=this.heapify(i)}return heap};$$.Heap.idFn=function(node){return node.id()};$$.Heap.minHeapComparator=function(a,b){return a>=b};$$.Heap.maxHeapComparator=function(a,b){return a<=b};$$.fn.heap=function(fnMap,options){for(var name in fnMap){var fn=fnMap[name];$$.Heap.prototype[name]=fn}};$$.heapfn=$$.Heap.prototype;$$.heapfn.size=function(){return this._private.length};$$.heapfn.getArgumentAsCollection=function(eles,cy){var result;if(typeof cy==="undefined"){cy=this._private.cy}if($$.is.elementOrCollection(eles)){result=eles}else{var resultArray=[],sourceEles=[].concat.apply([],[eles]);for(var i=0;i<sourceEles.length;i++){var id=sourceEles[i],ele=cy.getElementById(id);if(ele.length>0){resultArray.push(ele)}}result=new $$.Collection(cy,resultArray)}return result};$$.heapfn.isHeap=function(){var array=this._private.heap,arrlen=array.length,i,left,right,lCheck,rCheck,comparator=this._private.comparator;for(i=0;i<arrlen;i+=1){left=2*i+1;right=left+1;lCheck=left<arrlen?comparator(array[left],array[i]):true;rCheck=right<arrlen?comparator(array[right],array[i]):true;if(!lCheck||!rCheck){return false}}return true};$$.heapfn.heapSwap=function(i,j){var heap=this._private.heap,pointers=this._private.pointers,elements=this._private.elements,swapValue=heap[i],swapElems=elements[i],idI=elements[i],idJ=elements[j];heap[i]=heap[j];elements[i]=elements[j];pointers[idI]=j;pointers[idJ]=i;heap[j]=swapValue;elements[j]=swapElems};$$.heapfn.heapify=function(i,rootToLeaf){var treeLen=0,condHeap=false,array,pointers,current,left,right,best,tmp,comparator,parent;if(typeof rootToLeaf==="undefined"){rootToLeaf=true}array=this._private.heap;treeLen=array.length;comparator=this._private.comparator;current=i;while(!condHeap){if(rootToLeaf){left=2*current+1;right=left+1;best=current;if(left<treeLen&&!comparator(array[left],array[best])){best=left}if(right<treeLen&&!comparator(array[right],array[best])){best=right}condHeap=best===current;if(!condHeap){this.heapSwap(best,current);current=best}}else{parent=Math.floor((current-1)/2);best=current;condHeap=parent<0||comparator(array[best],array[parent]);if(!condHeap){this.heapSwap(best,parent);current=parent}}}};$$.heapfn.insert=function(eles){var elements=this.getArgumentAsCollection(eles),elsize=elements.length,element,elindex,elvalue,elid,i;for(i=0;i<elsize;i+=1){element=elements[i];elindex=this._private.heap.length;elvalue=this._private.extractor(element);elid=element.id();if(this._private.pointers.hasOwnProperty(elid)){throw"ERROR: Multiple items with the same id found: "+elid}this._private.heap.push(elvalue);this._private.elements.push(elid);this._private.pointers[elid]=elindex;this.heapify(elindex,false)}this._private.length=this._private.heap.length};$$.heapfn.getValueById=function(elementId){if(this._private.pointers.hasOwnProperty(elementId)){var elementIndex=this._private.pointers[elementId];return this._private.heap[elementIndex]}};$$.heapfn.contains=function(eles){var elements=this.getArgumentAsCollection(eles);for(var i=0;i<elements.length;i+=1){var elementId=elements[i].id();if(!this._private.pointers.hasOwnProperty(elementId)){return false}}return true};$$.heapfn.top=function(){if(this._private.length>0){return{value:this._private.heap[0],id:this._private.elements[0]}}};$$.heapfn.pop=function(){if(this._private.length>0){var top=this.top(),lastIndex=this._private.length-1,removeCandidate,removeValue,remId;this.heapSwap(0,lastIndex);removeCandidate=this._private.elements[lastIndex];removeValue=this._private.heap[lastIndex];remId=removeCandidate;this._private.heap.pop();this._private.elements.pop();this._private.length=this._private.heap.length;delete this._private.pointers[remId];this.heapify(0);return top}};$$.heapfn.findDirectionHeapify=function(index){var parent=Math.floor((index-1)/2),array=this._private.heap,condHeap=parent<0||this._private.comparator(array[index],array[parent]);this.heapify(index,condHeap)};$$.heapfn.edit=function(eles,edit){var elements=this.getArgumentAsCollection(eles);for(var i=0;i<elements.length;i+=1){var elementId=elements[i].id(),elementIndex=this._private.pointers[elementId],elementValue=this._private.heap[elementIndex];if($$.is.number(edit)){this._private.heap[elementIndex]=edit}else if($$.is.fn(edit)){this._private.heap[elementIndex]=edit.call(this._private.cy,elementValue,elementIndex)}this.findDirectionHeapify(elementIndex)}};$$.heapfn.delete=function(eles){var elements=this.getArgumentAsCollection(eles);for(var i=0;i<elements.length;i+=1){var elementId=elements[i].id(),elementIndex=this._private.pointers[elementId],lastIndex=this._private.length-1,removeCandidate,removeValue,remId;if(elementIndex!==lastIndex){this.heapSwap(elementIndex,lastIndex)}removeCandidate=this._private.elements[lastIndex];removeValue=this._private.heap[lastIndex];remId=removeCandidate;this._private.heap.pop();this._private.elements.pop();this._private.length=this._private.heap.length;delete this._private.pointers[remId];this.findDirectionHeapify(elementIndex)}return removeValue}})(cytoscape);